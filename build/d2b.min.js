!function(t,e){"use strict";function n(t,e){if("undefined"==typeof document)return e;t=t||"";var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");return r.type="text/css",r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t)),n.appendChild(r),e}function r(t){return"function"==typeof t?t:function(){return t}}function a(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0];return e.forEach(function(t){null!==r&&void 0!==r&&r!==!1||(r=t)}),r}function o(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t.label},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"start";n=r(n),t.each(function(t,r){var l=e.select(this),c=(""+n.call(this,t,r)).split(/\s+/).reverse(),d=void 0,u=[],s=[c.pop()],p=1.1,h=+l.attr("x"),b=+l.attr("y"),f=parseFloat(l.attr("dy"))||0;for(a(l.html(),"").indexOf("tspan")===-1&&l.text(""),d=c.pop();d;)s.join(" ").length+d.length>o&&(u.push(s),s=[]),s.push(d),d=c.pop();u.push(s);var g=l.selectAll("tspan").data(u),y=(u.length-1)*p,v="end"===i?y:"middle"===i?y/2:0;g.merge(g.enter().append("tspan")).text(function(t){return t.join(" ")}).attr("x",h).attr("y",b).attr("dy",function(t,e){return f+e*p-v+"em"})})}function i(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;t.each(function(){var t=e.select(this),r=t.text().split(/\s+/).reverse(),a=void 0,o=[],i=0,l=1.1,c=parseFloat(t.attr("y"))||0,d=parseFloat(t.attr("dy"))||0,u=t.text(null).append("tspan").attr("x",0).attr("y",c).attr("dy",d+"em");for(a=r.pop();a;)o.push(a),u.text(o.join(" ")),u.node().getComputedTextLength()>n&&(o.pop(),u.text(o.join(" ")),o=[a],u=t.append("tspan").attr("x",0).attr("y",c).attr("dy",++i*l+d+"em").text(a)),a=r.pop()})}function l(t,n){function r(t){return{innerRadius:n.innerRadius()(t),outerRadius:n.outerRadius()(t),startAngle:n.startAngle()(t),endAngle:n.endAngle()(t)}}return t.selection?void t.attrTween("d",function(t){var a=this;t=r(t),this.current=this.current||t;var o=e.interpolate(this.current,t);return function(t){return a.current=o(t),n(a.current)}}):t.attr("d",function(t){return this.current=r(t),n(t)})}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return isNaN(t)||null===t?e:t}function d(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t};return n=r(n),t.selection?void t.tween("text",function(t,r){var o=this,i=c(n.call(this,t,r));this.current=c(this.current,i);var l=e.interpolate(this.current,i);return function(t){o.textContent=a(o.current=l(t))}}):t.text(function(t,e){return this.current=c(n.call(this,t,e)),a(this.current)})}function u(t,n){function a(t){return{innerRadius:n.innerRadius()(t),outerRadius:n.outerRadius()(t),startAngle:n.startAngle()(t),endAngle:n.endAngle()(t),rotate:o(t)||0}}var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t.rotate};return o=r(o),t.selection?void t.attrTween("transform",function(t){var r=this;t=a(t),this.current=this.current||t;var o=e.interpolate(this.current,t);return function(t){return r.current=o(t),"translate("+n.centroid(r.current)+") "+("rotate("+(r.current.rotate||0)+")")}}):t.attr("transform",function(t){return this.current=a(t),"translate("+n.centroid(this.current)+")"+("rotate("+this.current.rotate+")")})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments[2],i=function(e,n){return function(r){if(!arguments.length)return a[e];var o=a[e];return a[e]=r,n&&n(r,o),t}},l=function(t){return function(){return a[t]}},c=function(e,n){return function(o){if(!arguments.length)return a[e];var i=a[e];return a[e]=r(o),n&&n(a[e],i),t}},d=function(e,n){return function(o){if(!arguments.length)return a[e];var i=a[e];return o&&o.domain?a[e]=function(){return o}:a[e]=r(o),n&&n(a[e],i),t}},u={base:function(){return t},values:function(){return a},removeProp:function(e){return o.indexOf(e)!==-1?u:(a[e]=null,t[e]=null,u)},addProp:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i(e),o=arguments[3];return a[e]||t[e]?u:(r=r||i(e,o),r(n),t[e]=r,u)},addPropGet:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l(e);return a[e]||t[e]?u:(a[e]=n,t[e]=r,u)},addMethod:function(e,n){return t[e]?u:(t[e]=n,u)},addPropFunctor:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c(e),o=arguments[3];return a[e]||t[e]?u:(r=r||c(e,o),r(n),t[e]=r,u)},addScaleFunctor:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d(t),r=arguments[3];return u.addProp(t,e,n,r)},addDispatcher:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"on",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dispatch";return t[o]?u:a[i]?u:(t[o]=function(e,n){return 0===arguments.length?a[i]:1===arguments.length?a[i].on(e):(a[i].on(e,n),t)},a[i]=e.dispatch.apply(n,r),u)}};return u}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I(),n={},r=function t(e){return(e.selection?e.selection():e).on(c("mouseover"),o).on(c("mouseout"),l).on(c("mousemove"),i),t},a=function(t,r){var a=this.getBoundingClientRect(),o={},i=(n.at.call(this,t,r)||(e.event.clientX>window.innerWidth/2?"center left":"center right")).split(" ");switch(i={x:i[1],y:i[0]},i.x){case"left":o.x=a.left;break;case"center":o.x=a.left+a.width/2;break;default:o.x=a.left+a.width}switch(i.y){case"bottom":o.y=a.top+a.height;break;case"center":o.y=a.top+a.height/2;break;default:o.y=a.top}return o},o=function(t,e){var r=n.selection.selectAll(".d2b-tooltip").data(function(t){return[t]}),a=r.enter().append("div").style("opacity",0).attr("class","d2b-tooltip");a.append("div").attr("class","d2b-tooltip-content"),r=r.merge(a),r.transition().duration(100).style("opacity",1),n.dispatch.call("insert",r,this,t,e)},i=function(t,r){var o=n.html.call(this,t,r),i=n.target.call(this,t,r),l=n.color.call(this,t,r),c=i?i.node():this,d=n.followMouse.call(this,t,r)?{x:e.event.clientX,y:e.event.clientY}:a.call(c,t,r),u=n.selection.selectAll(".d2b-tooltip").data(function(t){return[t]}),s=n.my.call(this,t,r)||(e.event.clientX>window.innerWidth/2?"left":"right");u.attr("class","d2b-tooltip d2b-tooltip-"+s).style("top",d.y+"px").style("left",d.x+"px").style("border-color",l).select(".d2b-tooltip-content").html(o),n.dispatch.call("move",u,this,t,r)},l=function(t,e){var r=n.selection.selectAll(".d2b-tooltip").data(function(t){return[t]});r.transition().duration(100).style("opacity",0).remove(),n.dispatch.call("remove",r,this,t,e)},c=function(t){return t+".d2b-tooltip"},d=function(e,a){a&&a.select(".d2b-tooltip-area-"+t).remove(),e&&(n.selection=e.selectAll(".d2b-tooltip-area-"+t).data([r]),n.selection=n.selection.merge(n.selection.enter().append("div").attr("class","d2b-tooltip-area-"+t+" d2b-tooltip-area")))};return s(r,n).addProp("container",e.select("body"),null,d).addMethod("clear",function(t){return(t.selection?t.selection():t).on(c("mouseover"),null).on(c("mouseout"),null).on(c("mousemove"),null),r}).addPropFunctor("followMouse",!1).addPropFunctor("color",null).addPropFunctor("my",null).addPropFunctor("at",null).addPropFunctor("target",null).addPropFunctor("html",null).addDispatcher(["insert","move","remove"]),r}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I(),n={},r={},o=function(t,e,r){if("y"===r){if(e.y===1/0)return t.style("opacity",0);t.style("opacity",1).attr("transform","translate(0, "+e.y+")").attr("y1",0).attr("y2",0).attr("x1",0).attr("x2",n.size.width)}else{if(e.x===1/0)return t.style("opacity",0);t.style("opacity",1).attr("transform","translate("+e.x+", 0)").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",n.size.height)}},i=function(t,r,a){var o=t.node();if(o){var i=t.node().getBoundingClientRect(),l=a.x,c=a.y,d=10;n.trackY?c+=r.y>n.size.height/2?r.y-d-i.height:r.y+d:c=e.event.clientY-a.y>n.size.height/2?e.event.clientY-d-i.height:e.event.clientY+d,n.trackX?l+=r.x>n.size.width/2?r.x-d-i.width:r.x+d:l=e.event.clientX-a.x>n.size.width/2?e.event.clientX-d-i.width:e.event.clientX+d,l+=window.pageXOffset,c+=window.pageYOffset,t.style("left",l+"px").style("top",c+"px")}},l=function(t,e){var r=n.title(e.points.map(function(t){return t.data}));t.select(".d2b-tooltip-title").style("display",r?"block":"none").html(r);var a=t.select(".d2b-tooltip-content"),o=a.selectAll(".d2b-tooltip-row").data(e.points),i=o.enter().append("div").attr("class","d2b-tooltip-row");o.exit().remove(),o=o.merge(i).html(function(t){return t.row}).style("border-left-color",function(t){return t.color||"transparent"})},c=function(t){var r={x:e.event.clientX-t.x,y:e.event.clientY-t.y},o=1/0,i=1/0,l=[];for(var c in x)if(x.hasOwnProperty(c)){var d=x[c],u=function(t){if(!d.hasOwnProperty(t))return"continue";var e=d[t],c=[];e.config.data.forEach(function(t,d){var u={data:t,x:a(e.config.x(t,d),n.x(t,d)),y:a(e.config.y(t,d),n.y(t,d)),color:a(e.config.color(t,d),n.color(t,d)),row:a(e.config.row(t,d),n.row(t,d))};if(n.trackX&&n.trackY){if(u.x===o&&u.y===i)return c.push(u);var s=Math.sqrt(Math.pow(o-r.x,2)+Math.pow(i-r.y,2)),p=Math.sqrt(Math.pow(u.x-r.x,2)+Math.pow(u.y-r.y,2));p<s&&p<n.threshold&&(o=u.x,i=u.y,l=[],c=[u])}else if(n.trackX){if(u.x===o)return c.push(u);var h=Math.abs(o-r.x),b=Math.abs(u.x-r.x);b<h&&b<n.threshold&&(o=u.x,l=[],c=[u])}else if(n.trackY){if(u.y===i)return c.push(u);var f=Math.abs(i-r.y),g=Math.abs(u.y-r.y);g<f&&g<n.threshold&&(i=u.y,l=[],c=[u])}}),l=l.concat(c)};for(var s in d){u(s)}}return l=l.sort(function(t,n){return e.ascending(t.x,n.x)||e.ascending(t.y,n.y)}),{x:o,y:i,points:l}},d=function(t){t.transition().duration(50).style("opacity",0).remove()},u=function(t){t.transition().duration(50).style("opacity",1)},p=function(t,e){var a=n.selectionSvg.selectAll(".d2b-tooltip-marker-x").data(n.trackX?[r]:[]),o=a.enter().append("line").attr("class","d2b-tooltip-marker-x d2b-tooltip-marker"),i=n.selectionSvg.selectAll(".d2b-tooltip-marker-y").data(n.trackY?[r]:[]),l=i.enter().append("line").attr("class","d2b-tooltip-marker-y d2b-tooltip-marker"),c=n.selection.selectAll(".d2b-tooltip").data([r]),d=c.enter().append("div").attr("class","d2b-tooltip");d.merge(c).call(u),i.merge(l).call(u),a.merge(o).call(u),d.append("div").attr("class","d2b-tooltip-title"),d.append("div").attr("class","d2b-tooltip-content"),n.dispatch.call("insert",n.tooltip,t,e)},h=function(){n.selectionSvg.selectAll(".d2b-tooltip-marker-x").data([]).exit().call(d),n.selectionSvg.selectAll(".d2b-tooltip-marker-y").data([]).exit().call(d),n.selection.selectAll(".d2b-tooltip").data([]).exit().call(d)},b=function(t,e){var r=n.selectionSvg.selectAll(".d2b-tooltip-base").data([t]);r=r.merge(r.enter().append("rect").attr("class","d2b-tooltip-base"));var a=r.node().getBoundingClientRect();a={x:a.left,y:a.top};var d=c(a);return d.points.length?(p(),n.selectionSvg.select(".d2b-tooltip-marker-x").call(o,d,"x"),n.selectionSvg.select(".d2b-tooltip-marker-y").call(o,d,"y"),n.selection.select(".d2b-tooltip").call(l,d).call(i,d,a),void n.dispatch.call("move",n.tooltip,t,e)):h()},f=function(t,e){h(),n.dispatch.call("remove",n.tooltip,t,e)},g=function(t){return t+".d2b-tooltip-axis"},y=function(e,a){a&&a.select("div.d2b-tooltip-axis-area-"+t).remove(),e&&(n.selection=e.selectAll("div.d2b-tooltip-axis-area-"+t).data([r]),n.selection=n.selection.merge(n.selection.enter().append("div").attr("class","d2b-tooltip-axis-area-"+t+" d2b-tooltip-axis-area")))},v=function(e,a){a&&a.select("g.d2b-tooltip-axis-area-"+t).remove(),e&&(n.selectionSvg=e.selectAll("g.d2b-tooltip-axis-area-"+t).data([r]),n.selectionSvg=n.selectionSvg.merge(n.selectionSvg.enter().append("g").attr("class","d2b-tooltip-axis-area-"+t+" d2b-tooltip-axis-area")))},m=function(t,e){e&&e.on(g("mouseout"),null).on(g("mousemove"),null),t&&t.on(g("mouseout"),f).on(g("mousemove"),b)};s(r,n).addProp("htmlContainer",e.select("body"),null,y).addProp("svgContainer",null,null,v).addProp("tracker",e.select("body"),null,m).addProp("size",{height:0,width:0}).addProp("trackX",!0).addProp("trackY",!1).addProp("threshold",1/0).addMethod("clear",function(t,e){return 0===arguments.length?x={}:1===arguments.length?delete x[t]:arguments.length>=2&&delete x[t][e],r}).addPropFunctor("title",null).addPropFunctor("x",function(t){return t.x}).addPropFunctor("y",function(t){return t.y}).addPropFunctor("color",null).addPropFunctor("row",null).addDispatcher(["move","insert","remove"]);var x={};return r.graph=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=x[t]=x[t]||{},r=n[e];if(!r){r=n[e]={interface:{},config:{}};var a=s(r.interface,r.config);a.addProp("data",[]).addMethod("clear",function(){return r.config.data=[],r.interface}).addMethod("addPoint",function(t){return r.config.data.push(t),r.interface}).addPropFunctor("x",null).addPropFunctor("y",null).addPropFunctor("color",null).addPropFunctor("row",null)}return r.interface},r}function b(){var t={},n=function(n){var r=this,a=n;n=n.map(t.values);var o=[],i=n.map(function(e){var n={};return e.forEach(function(e,a){var i=t.x.call(r,e,a);o.push(i),n[i]=t.y.call(r,e,a)}),n});o=e.set(o).values();var l=o.reduce(function(t,e,n){return t[e]=n,t},{}),c=e.range(0,n.length),d=o.map(function(t){return i.map(function(e){return e[t]||0})});t.stack.keys(c).value(function(t,e){return t[e]||0});var u=t.stack(d);return n.forEach(function(e,n){e.forEach(function(e,a){var o=t.x.call(r,e,a),i=u[n][l[o]];t.out.call(r,e,i[0],i[1],o)})}),a};return s(n,t).addProp("stack",e.stack()).addPropFunctor("values",function(t){return t}).addPropFunctor("x",function(t){return t.x}).addPropFunctor("y",function(t){return t.y}).addProp("out",function(t,e,n){t.y0=e,t.y1=n}),n}function f(){var t={},e=function(e){var n=e.selection?e.selection():e,r=n.selectAll(".d2b-breadcrumbs").data(function(t){return[t]}),a=r.enter().append("div").attr("class","d2b-breadcrumbs");r=r.merge(a).classed("d2b-vertical",t.vertical);var o=r.selectAll(".d2b-breadcrumb").data(t.values,t.key),i=o.exit(),l=o.enter().append("div").attr("class","d2b-breadcrumb").style("opacity",0);l.append("div").attr("class","d2b-breadcrumb-icon"),l.append("div").attr("class","d2b-breadcrumb-content"),o=o.merge(l).order(),o.select(".d2b-breadcrumb-content").html(t.html),e!==n&&(o=o.transition(e),i=i.transition(e).style("opacity",0)),o.style("border-color",t.color).style("opacity",1).select(".d2b-breadcrumb-icon").style("background-color",t.color),i.remove()};return s(e,t).addPropFunctor("values",function(t){return t}).addPropFunctor("key",function(t,e){return e}).addPropFunctor("color","blue").addPropFunctor("html",function(t){return t.html}).addPropFunctor("vertical",!0),e}function g(){var t={},n=e.symbol().size(80),r=function r(a){var o=a.selection?a.selection():a,i=o.selectAll(".d2b-legend").data(function(t){return[t]}),l=i.enter().append("div").attr("class","d2b-legend");i=i.merge(l).classed("d2b-vertical",t.vertical);var c=i.selectAll(".d2b-legend-item").data(t.values,t.key),d=c.exit(),u=c.enter().append("div").attr("class","d2b-legend-item").style("opacity",0);u.append("div").attr("class","d2b-legend-icon"),u.append("div").attr("class","d2b-legend-content"),c=c.merge(u).order(),c.select(".d2b-legend-content").html(t.html),a!==o&&(c=c.transition(a),d=d.transition(a).style("opacity",0)),c.style("opacity",1).each(function(r,a){var o=e.select(this),i=t.color(r,a),l=t.empty(r,a);o.style("border-color",i);var c=t.icon(r,a),d=o.select(".d2b-legend-icon"),u=[],s=[],p=d.node().getBoundingClientRect(),h={width:p.width,height:p.height},b={x:h.width/2,y:h.height/2};"string"==typeof c?u.push(c):s.push(c);var f=d.selectAll(".d2b-legend-svg-icon").data(function(t){return[t]}),g=f.enter().append("svg");g.attr("class","d2b-legend-svg-icon").attr("width",h.width).attr("height",h.height),f=f.merge(g);var y=f.selectAll("text").data(u);y.exit().remove(),y=y.merge(y.enter().append("text")),y.text(function(t){return t}).style("stroke",i).style("fill",l?"white":i).attr("transform","translate("+b.x+","+b.y+")");var v=f.selectAll("path").data(s);v.exit().remove(),v=v.merge(v.enter().append("path")),v.style("stroke",i).style("fill",l?"white":i).attr("d",function(t){return n.type(t)()}).attr("transform","translate("+b.x+","+b.y+")")}),i.each(function(n,a){var i=t.allowEmptied(n,a),l=e.select(this).selectAll(".d2b-legend-item"),c=function(e){l.each(function(n,r){t.setEmpty(n,r,e)})},d=function e(){var e=!0;return l.each(function(n,r){t.empty(n,r)||(e=!1)}),e},u=function(n,a){t.setEmpty(n,a,!t.empty(n,a)),!i&&d()&&c(!1),o.call(r),e.select(this.parentNode).dispatch("change",{bubbles:!0})},s=function(n,a){c(!0),t.setEmpty(n,a,!1),o.call(r),e.select(this.parentNode).dispatch("change",{bubbles:!0})};l.each(function(n,r){var a=t.clickable(n,r),o=t.dblclickable(n,r);e.select(this).on("click",a?u:null).on("dblclick",o?s:null)})}),d.remove()};return s(r,t).addPropFunctor("values",function(t){return t}).addPropFunctor("key",function(t,e){return e}).addPropFunctor("color",function(t){return U(t.html)}).addPropFunctor("html",function(t){return t.html}).addPropFunctor("icon","ï„‘").addPropFunctor("vertical",!1).addPropFunctor("allowEmptied",!1).addPropFunctor("clickable",!1).addPropFunctor("dblclickable",!1).addPropFunctor("empty",function(t){return t.empty}).addPropFunctor("setEmpty",function(t,e,n){return t.empty=n}),r}function y(){function t(t){var e={top:0,left:0,right:0,bottom:0};return"number"==typeof t?{top:t,left:t,right:t,bottom:t}:(["top","bottm","right","left"].forEach(function(n){t[n]&&e[n]==t[n]}),e)}function n(t,e){return{width:t&&t.width>0?t.width:e.width,height:t&&t.height>0?t.height:e.height}}function r(t,e,n){n(t),n(e)}function a(t,e,n,a,o,i){var l=t.node();if(l){n.style("top","").style("left","").style("right","").style("bottom","").style("width","").style("height","");var c=void 0;"right"===a||"left"===a?(t.classed("d2b-vertical",!0),c=l.getBoundingClientRect(),r(e,n,function(t){t.style(a,o[a]+"px").style("top",o.top+"px").style("height",i.height+"px")}),o[a]+=c.width,i.width-=c.width):"top"===a||"bottom"===a?(t.classed("d2b-vertical",!1),c=l.getBoundingClientRect(),r(e,n,function(t){t.style(a,o[a]+"px").style("left",o.left+"px").style("width",i.width+"px")}),o[a]+=c.height,i.height-=c.height):t.classed("d2b-vertical",!1)}}var o={},i=function i(l){var c=l.selection?l.selection():l,d=c.selectAll(".d2b-chart-frame").data(function(t){return[t]}),u=d.enter().append("div").attr("class","d2b-chart-frame");return d=d.merge(u),c.each(function(i){var d=e.select(this).select(".d2b-chart-frame"),u=d,s=t(o.padding(i)),p=t(o.chartPadding(i)),h=n(o.size(i),this.getBoundingClientRect());r(d,u,function(t){t.style("width",h.width+"px").style("height",h.height+"px")}),h.width-=s.left+s.right,h.height-=s.top+s.bottom;var b=o.legendEnabled(i)?[i]:[],f=d.selectAll(".d2b-legend-frame").data(b),g=f.enter().append("div").attr("class","d2b-legend-frame"),y=f.exit();y.remove(),g.append("div").attr("class","d2b-legend-container"),f=f.merge(g);var v=f,m=o.breadcrumbsEnabled(i)?[i]:[],x=d.selectAll(".d2b-breadcrumbs-frame").data(m),P=x.enter().append("div").attr("class","d2b-breadcrumbs-frame"),w=x.exit();w.remove(),P.append("div").attr("class","d2b-breadcrumbs-container"),x=x.merge(P);var k=x,F=d.selectAll(".d2b-chart").data(function(t){return[t]}),_=F.enter().append("svg").attr("class","d2b-chart");_.append("g").attr("class","d2b-chart-container"),F=F.merge(_);var A=F;l!==c&&(u=u.transition(l),v=v.transition(l),k=k.transition(l),A=A.transition(l)),a(x,P,k,o.breadcrumbsOrient(i),s,h),a(f,g,v,o.legendOrient(i),s,h),r(_,A,function(t){t.style("left",s.left+"px").style("top",s.top+"px").style("width",h.width+"px").style("height",h.height+"px"),t.select(".d2b-chart-container").attr("transform","translate("+[p.left,p.top]+")")}),h.width-=p.left+p.right,h.height-=p.top+p.bottom,F.select(".d2b-chart-container").node().__size__=h}),i};return s(i,o).addPropFunctor("size",null).addPropFunctor("legendEnabled",!0).addPropFunctor("legendOrient","bottom").addPropFunctor("breadcrumbsEnabled",!1).addPropFunctor("breadcrumbsOrient","right").addPropFunctor("chartPadding",10).addPropFunctor("padding",10),i}function v(t,e){var n={};for(var r in t)"function"!=typeof t[r]&&e.indexOf(r)<0&&(n[r]=t[r]);return n}function m(t,e,n){var a=0,o=0;if(n=r(n||1),e=r(e||function(t){return t}),t.filter(function(t){return!isNaN(W(n(t)))&&!isNaN(W(e(t)))}).forEach(function(t){var r=n(t),i=e(t);a+=r,o+=i*r}),t.length&&a)return o/a}function x(t,n,a){a=r(a||1),n=r(n||function(t){return t});var o,i=[],l=t.filter(function(t){return 0!==a(t)&&!isNaN(W(a(t)))&&!isNaN(W(n(t)))}).sort(function(t,r){return e.ascending(n(t),n(r))});o=Math.round(e.sum(l,function(t){return a(t)})/2*1e12)/1e12;var c=0,d=!1;if(l.forEach(function(t){d&&(i.push(n(t)),d=!1),c+=a(t),c===o&&(i.push(n(t)),d=!0),c>o&&0===i.length&&i.push(n(t))}),t.length)return m(i)}function P(t,e,n){n=r(n||1),e=r(e||function(t){return t});var a=[],o=0,i={};return t.forEach(function(t){var r=W(e(t));isNaN(e(t))||(i[r]=i[r]||0,i[r]+=n(t),i[r]>o?(o=i[e(t)],a=[e(t)]):i[e(t)]==o&&a.push(e(t)))}),o<=1||!a.length?null:1===a.length?a[0]:a}function w(t,n){n=r(n||function(t){return t});var a=e.extent(t,n);if(t.length)return a[1]-a[0]}function k(t,n){if(n=r(n||function(t){return t}),t.length)return e.mean(e.extent(t,n))}function F(t){return t*(180/Math.PI)}function _(t){return t*(Math.PI/180)}function A(){function t(t,e){return l.empty.call(this,t,e)?0:1}function n(t,e){var n=l.size.call(this,t,e),r=l.empty.call(this,t,e);return d.size(r?n:2.5*n).call(this,t,e)}function r(t,e){var n=l.size.call(this,t,e),r=l.empty.call(this,t,e);return d.size(r?n/3:n).call(this,t,e)}function a(t,e){var n=l.size.call(this,t,e);return d.size(n).call(this,t,e)}function o(t,a){var o=l.empty.call(this,t,a);e.select(this).select("path.d2b-point-back").transition().duration(100).attr("d",n),e.select(this).select("path.d2b-point-front").transition().duration(100).style("opacity",o?.5:1).attr("d",r)}function i(t,n){var o=l.empty.call(this,t,n);e.select(this).select("path.d2b-point-back").transition().duration(100).attr("d",a),e.select(this).select("path.d2b-point-front").transition().duration(100).style("opacity",o?0:1).attr("d",r)}var l={},c=function n(c){var d=c.selection?c.selection():c,u=d.selectAll("path.d2b-point-back").data(function(t){return[t]});u.enter().append("path").attr("class","d2b-point-back").attr("d",a).style("fill-opacity",0).style("stroke",l.stroke).style("stroke-width",l.strokeWidth),c!==d&&(u=u.transition(c)),u.attr("d",a).style("stroke",l.stroke).style("stroke-width",l.strokeWidth);var s=d.selectAll("path.d2b-point-front").data(function(t){return[t]});return s.enter().append("path").attr("class","d2b-point-front").attr("d",r).style("opacity",t).style("fill",l.fill).style("stroke",l.stroke).style("stroke-width",l.strokeWidth),c!==d&&(s=s.transition(c)),s.attr("d",r).style("opacity",t).style("fill",l.fill).style("stroke",l.stroke).style("stroke-width",l.strokeWidth),d.each(function(t,n){var r=l.active.call(this,t,n);e.select(this).on("mouseover.d2b-point",r?o:null).on("mouseout.d2b-point",r?i:null)}),n},d=e.symbol();return s(c,l).addPropFunctor("size",150,null,function(t){return d.size(t)}).addPropFunctor("type",e.symbolCircle,null,function(t){return d.type(t)}).addPropFunctor("active",!1).addPropFunctor("empty",!1).addPropFunctor("fill","steelblue").addPropFunctor("stroke",function(t,n){return e.rgb(l.fill.call(this,t,n)).darker(.3)}).addPropFunctor("strokeWidth","1px"),c}function M(){function t(t,e){t.selectAll(".d2b-legend-item").on("click",function(r,a){n.call(this,r,a,t,e)}).on("dblclick",function(n,a){r.call(this,n,a,t,e)})}function n(t,n,r,a){var o=i.clickable.call(this,t,n),l=i.allowEmptied.call(r.node(),r.datum(),a);if(o){i.setEmpty(t,n,!i.empty(t,n));var d=e.select(this),u=r.selectAll(".d2b-legend-item"),s=!0;u.each(function(t,e){return s=!!i.empty(t,e)&&s}),s&&!l?(u.each(function(t,e){return i.setEmpty(t,e,!1)}).transition().duration(100).call(c),u.filter(function(e){return e!=t}).dispatch("change")):d.transition().duration(100).call(c),d.dispatch("change",{bubbles:!0})}}function r(t,n,r){var a=i.dblclickable.call(this,t,n);if(a){var o=r.selectAll(".d2b-legend-item");o.each(function(t,e){return i.setEmpty(t,e,!0)}),i.setEmpty(t,n,!1),o.transition().duration(100).call(c),o.filter(function(e){return e!=t}).dispatch("change"),e.select(this).dispatch("change",{bubbles:!0})}}function a(t,e,n,r){var a=0,o=0;switch(r[1]){case"center":case"middle":o=n.height/2-e.height/2;break;case"bottom":o=n.height-e.height;break;case"top":default:o=0}switch(r[2]){case"center":case"middle":a=n.width/2-e.width/2;break;case"right":a=n.width-e.width;break;case"left":default:a=0}e.left=a,e.right=n.width-a+e.width,e.top=o,e.bottom=n.height-o+e.height,t.attr("transform","translate("+a+", "+o+")")}var i={},l=function n(r){return r.each(function(n,l){var u=e.select(this),s=i.itemSize.call(this,n,l),p=i.size.call(this,n,l),h=i.orient.call(this,n,l).split(" "),b=h[0],f=i.maxTextLength.call(this,n,l),g=i.items.call(this,n,l);c.size(1.5*Math.pow(s/2,2)).strokeWidth(.1*s);var y=u.selectAll(".d2b-legend").data([g]),v=y.enter().append("g").attr("class","d2b-legend");y=y.merge(v);var m=y.selectAll(".d2b-legend-item").data(function(t){return t.sort(i.order)},i.key),x=m.enter().append("g").attr("class","d2b-legend-item").style("opacity",0);x.append("g").append("text");var P=m.exit();m=m.merge(x).style("cursor",function(t,e){var n=i.clickable.call(this,t,e),r=i.dblclickable.call(this,t,e);return n||r?"pointer":"auto"}),u.call(t,l);var w=m.select("g").attr("transform","translate("+s/2+", "+s/2+")"),k=m.select("text").attr("transform","translate("+s/1.5+", "+s/3+")").style("font-size",s+"px").call(o,i.label,f);r.selection&&(P=P.transition(r).style("opacity",0),m=m.transition(r),w=w.transition(r),k=k.transition(r),y=y.transition(r)),P.remove(),w.call(c);var F=0;k.each(function(){F=Math.max(F,this.getBBox().width)}),F+=s;var _={x:s,y:5};x.call(d[b],{},_,s,p,F),this.__box__={width:0,height:0,top:0,left:0,right:0,bottom:0},m.style("opacity",1).call(d[b],this.__box__,_,s,p,F),v.call(a,this.__box__,p,h),y.call(a,this.__box__,p,h)}),n},c=A(),d={horizontal:function(t,n,r,a,o,i){var l=0,c=0,d=0;t.attr("transform",function(){var t=e.select(this),u=a*t.selectAll("tspan").size(),s=t.select("text").node().getBBox().width;l+i>o.width&&(l=0,c+=d+r.y,d=0);var p="translate("+l+", "+c+")";return d=Math.max(d,u),n.width=Math.max(n.width,l+s+1.5*a),l+=i+r.x,p}),n.height=c+d},vertical:function(t,n,r,a,o){var i=0,l=0,c=0;t.attr("transform",function(){var t=e.select(this),d=a*t.selectAll("tspan").size(),u=t.select("text").node().getBBox().width;l+d>o.height&&(i+=c+r.x+a,l=0,c=0);var s="translate("+i+", "+l+")";return c=Math.max(c,u),n.height=Math.max(n.height,l+d),l+=d+r.y,s}),n.width=i+c+1.5*a}};return s(l,i).addPropFunctor("items",function(t){return t}).addPropFunctor("itemSize",12).addPropFunctor("size",{width:960,height:500}).addPropFunctor("orient","vertical center right").addPropFunctor("maxTextLength",1/0).addPropFunctor("allowEmptied",!1).addPropFunctor("order",function(t,n){return e.ascending(i.label(t),i.label(n))}).addPropFunctor("key",function(t,e){return e}).addPropFunctor("clickable",!1).addPropFunctor("dblclickable",!1).addPropFunctor("label",function(t){return t.label}).addPropFunctor("empty",function(t){return t.empty},null,function(t){return c.empty(t)}).addPropFunctor("setEmpty",function(t,e,n){t.empty=n}).addPropFunctor("active",!1,null,function(t){return c.active(t)}).addPropFunctor("symbol",e.symbolCircle,null,function(t){return c.type(t)}).addPropFunctor("color",function(t){return U(t.label)},null,function(t){return c.fill(t)}).addMethod("box",function(t){var e=t.node?t.node():t;return e?e.__box__:null}),l}function z(){function t(t,e,a){var o=n(t,e,a),i=r(t,e,a);return o?{startAngle:o.endAngle,endAngle:o.endAngle}:i?{startAngle:i.startAngle,endAngle:i.startAngle}:{startAngle:0,endAngle:0}}function n(t,e,n){for(var r=e.length;--t>=0;)for(var o=a.key(n[t].data,t),i=0;i<r;++i)if(a.key(e[i].data,i)===o)return e[i]}function r(t,e,n){for(var r=n.length,o=e.length;++t<r;)for(var i=a.key(n[t].data,t),l=0;l<o;++l)if(a.key(e[l].data,l)===i)return e[l]}var a={},o=function n(r){var o=r.selection?r.selection():r;a.pie.value(a.value),a.arc.startAngle(function(t){return t.startAngle}).endAngle(function(t){return t.endAngle}).padAngle(function(t){return t.padAngle});var i=o.selectAll(".d2b-pie").data(function(t){return[a.pie(a.values(t))]}),c=i.enter().append("g").attr("class","d2b-pie");return i=i.merge(c),i.each(function(n){var i=e.select(this),c=i.selectAll(".d2b-pie-arc"),d=c.data();c=c.data(n,function(t,e){return t.key=a.key(t.data,e),t.key});var u=c.enter().append("g").attr("class","d2b-pie-arc"),s=c.exit(),p=c.merge(u).order();u.append("path").attr("fill",function(t,e){return a.color.call(this,t.data,e)});var h=p.data();u.select("path").each(function(e,n){this.current=t(n,d,h)}),s.datum(function(e,n){var r=t(n,h,d);return r.data=e.data,r.innerRadius=e.innerRadius,r.outerRadius=e.outerRadius,r}),r!==o&&(s=s.transition(r),p=p.transition(r)),p.select("path").call(l,a.arc).attr("fill",function(t,e){return a.color.call(this,t.data,e)}),s.remove().select("path").call(l,a.arc)}),n};return s(o,a).addProp("arc",e.arc()).addProp("pie",e.pie().sort(null)).addPropFunctor("values",function(t){return t}).addPropFunctor("key",function(t){return t.label}).addPropFunctor("value",function(t){return t.value}).addPropFunctor("color",function(t){return U(t.label)}),o}function E(t){return!(t.includes("NaN")||t.includes("Inifnity"))}function B(){function t(t,e){var r=n.graphs(t,e).map(function(t,e){var r={data:t,index:e,align:n.align(t,e),tooltipGraph:n.tooltipGraph(t,e),shift:n.shift(t,e),stackBy:n.stackBy(t,e),key:n.key(t,e),color:n.color(t,e)};return r.values=n.values(t,e).map(function(t,e){var a={data:t,index:e,graph:r,x:n.px(t,e),y:n.py(t,e)};return a.y1=a.y,a.y0=0,a}),r});return i.entries(r).forEach(function(t){t.values.length>1&&o(t.values)}),r}var n={},r=function e(r){var o=r.selection?r.selection():r,i=o.selectAll(".d2b-line-graphs").data(function(t){return[t]});i=i.merge(i.enter().append("g").attr("class","d2b-line-graphs"));var l=i.selectAll(".d2b-line-graph").data(function(e,n){return t(e,n)},function(t){return t.key}),c=l.enter().append("g").attr("class","d2b-line-graph d2b-graph").style("opacity",0);c.append("path").attr("class","d2b-line").style("stroke",function(t){return t.color}).attr("d",function(t){var e=this.parentNode.parentNode,r=e.__scaleX,o=e.__scaleY;return a.call(this,t,r||n.x,o||n.y)});var d=l.merge(c).order(),u=l.exit(),s=d.select(".d2b-line");r!==o&&(d=d.transition(r),u=u.transition(r),s=s.transition(r),u.style("opacity",0).select(".d2b-line").attr("d",function(t){return a.call(this,t,n.x,n.y)})),d.style("opacity",1),u.remove(),s.style("stroke",function(t){return t.color}).attr("d",function(t){return a.call(this,t,n.x,n.y,!0)});var p=n.x.copy(),h=n.y.copy();return i.each(function(){this.__scaleX=p,this.__scaleY=h}),e},a=function(t,e,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=t.shift;null===o&&(o=e.bandwidth?e.bandwidth()/2:0),t.tooltipGraph&&a&&t.tooltipGraph.data(t.values).x(function(t){return e(t.x)+o}).y(function(e){return r(e[t.align])}).color(t.color),n.line.x(function(t){return e(t.x)+o}).y(function(e){return r(e[t.align])});var i=n.line(t.values);return E(i)?i:this.getAttribute("d")},o=b().values(function(t){return t.values;
}).y(function(t){return t.y}).x(function(t){return t.x}),i=e.nest().key(function(t){var e=t.stackBy;return e!==!1&&null!==e?e:I()});return s(r,n).addProp("line",e.line()).addProp("stack",o.stack(),null,function(t){return o.stack(t)}).addProp("x",e.scaleLinear()).addProp("y",e.scaleLinear()).addPropGet("type","line").addPropFunctor("graphs",function(t){return t}).addPropFunctor("align","y1").addPropFunctor("tooltipGraph",function(t){return t.tooltipGraph}).addPropFunctor("shift",null).addPropFunctor("stackBy",null).addPropFunctor("key",function(t){return t.label}).addPropFunctor("values",function(t){return t.values}).addPropFunctor("color",function(t){return U(t.label)}).addPropFunctor("px",function(t){return t.x}).addPropFunctor("py",function(t){return t.y}).addMethod("getComputedGraphs",function(e){return(e.selection?e.selection():e).data().map(function(e,n){return t(e,n)})}).addMethod("getVisiblePoints",function(t){var e=r.getComputedGraphs(t);return e.map(function(t){return[].concat.apply([],t.map(function(t){return t.values.map(function(e){return{x:e.x,y:e[t.align],graph:t}})}))})[0]}),r}function R(){function t(t,e){var r=n.graphs(t,e).map(function(t,e){var r={data:t,index:e,tooltipGraph:n.tooltipGraph(t,e),shift:n.shift(t,e),stackBy:n.stackBy(t,e),key:n.key(t,e),color:n.color(t,e)};return r.values=n.values(t,e).map(function(t,e){var a={data:t,index:e,graph:r,x:n.px(t,e),y:n.py(t,e)};return a.y1=a.y,a.y0=0,a}),r});return i.entries(r).forEach(function(t){t.values.length>1&&o(t.values)}),r}var n={},r=function e(r){var o=r.selection?r.selection():r,i=o.selectAll(".d2b-area-graphs").data(function(t){return[t]});i=i.merge(i.enter().append("g").attr("class","d2b-area-graphs"));var l=i.selectAll(".d2b-area-graph").data(function(e,n){return t(e,n)},function(t){return t.key}),c=l.enter().append("g").attr("class","d2b-area-graph d2b-graph").style("opacity",0);c.append("path").attr("class","d2b-area").style("fill",function(t){return t.color}).attr("d",function(t){var e=this.parentNode.parentNode,r=e.__scaleX,o=e.__scaleY;return a.call(this,t,r||n.x,o||n.y)});var d=l.merge(c).order(),u=l.exit(),s=d.select(".d2b-area");r!==o&&(d=d.transition(r),u=u.transition(r),s=s.transition(r),u.style("opacity",0).select(".d2b-area").attr("d",function(t){return a.call(this,t,n.x,n.y)})),d.style("opacity",1),u.remove(),s.style("fill",function(t){return t.color}).attr("d",function(t){return a.call(this,t,n.x,n.y,!0)});var p=n.x.copy(),h=n.y.copy();return i.each(function(){this.__scaleX=p,this.__scaleY=h}),e},a=function(t,e,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=t.shift;null===o&&(o=e.bandwidth?e.bandwidth()/2:0),t.tooltipGraph&&a&&t.tooltipGraph.data(t.values).x(function(t){return e(t.x)+o}).y(function(t){return r(t.y1)}).color(t.color),n.area.x(function(t){return e(t.x)+o}).y0(function(t){return r(t.y0)}).y1(function(t){return r(t.y1)});var i=n.area(t.values);return E(i)?i:this.getAttribute("d")},o=b().values(function(t){return t.values}).y(function(t){return t.y}).x(function(t){return t.x}),i=e.nest().key(function(t){var e=t.stackBy;return e!==!1&&null!==e?e:I()});return s(r,n).addProp("area",e.area()).addProp("stack",o.stack(),null,function(t){return o.stack(t)}).addProp("x",e.scaleLinear()).addProp("y",e.scaleLinear()).addPropGet("type","area").addPropFunctor("graphs",function(t){return t}).addPropFunctor("tooltipGraph",function(t){return t.tooltipGraph}).addPropFunctor("shift",null).addPropFunctor("stackBy",null).addPropFunctor("key",function(t){return t.label}).addPropFunctor("values",function(t){return t.values}).addPropFunctor("color",function(t){return U(t.label)}).addPropFunctor("px",function(t){return t.x}).addPropFunctor("py",function(t){return t.y}).addMethod("getComputedGraphs",function(e){return(e.selection?e.selection():e).data().map(function(e,n){return t(e,n)})}).addMethod("getVisiblePoints",function(t){var e=r.getComputedGraphs(t);return e.map(function(t){var e=[].concat.apply([],t.map(function(t){return t.values.map(function(e){return{x:e.x,y:e.y0,graph:t}})})),n=[].concat.apply([],t.map(function(t){return t.values.map(function(e){return{x:e.x,y:e.y1,graph:t}})}));return e.concat(n)})[0]}),r}function G(){function t(t,e){var n=r.graphs(t,e).map(function(t,e){var n={data:t,index:e,align:r.align(t,e),tooltipGraph:r.tooltipGraph(t,e),shift:r.shift(t,e),stackBy:r.stackBy(t,e),key:r.key(t,e),color:r.color(t,e),symbol:r.symbol(t,e)};return n.values=r.values(t,e).map(function(t,e){var a={data:t,index:e,graph:n,x:r.px(t,e),y:r.py(t,e),color:r.pcolor(t,e),symbol:r.psymbol(t,e),key:r.pkey(t,e),size:r.psize(t,e)};return a.y1=a.y,a.y0=0,a}),n});return i.entries(n).forEach(function(t){t.values.length>1&&o(t.values)}),n}function n(t,e,n,r,a){t.attr("transform",function(t){var o=n(t[a]),i=e(t.x)+r;return isFinite(i)&&isFinite(o)?"translate("+[i,o]+")":this.getAttribute("transform")})}var r={},a=function a(o){var i=o.selection?o.selection():o,l=i.selectAll(".d2b-scatter-graphs").data(function(t){return[t]});l=l.merge(l.enter().append("g").attr("class","d2b-scatter-graphs"));var c=l.selectAll(".d2b-scatter-graph").data(function(e,n){return t(e,n)},function(t){return t.key}),d=c.enter().append("g").attr("class","d2b-scatter-graph d2b-graph").style("opacity",0),u=c.merge(d).order(),s=c.exit();return o!==i&&(u=u.transition(o),s=s.transition(o),s.style("opacity",0).each(function(t){var a=e.select(this),l=r.x,c=r.y,d=a.selectAll(".d2b-scatter-point");o!==i&&(d=d.transition(o));var u=t.shift;null===u&&(u=l.bandwidth?l.bandwidth()/2:0),d.style("opacity",0).call(n,l,c,u,t.align).remove()})),u.style("opacity",1),s.remove(),u.each(function(t){var a=e.select(this),l=r.x,c=r.y,d=this.parentNode,u=d.__scaleX||l,s=d.__scaleY||c,p=t.shift;null===p&&(p=l.bandwidth?l.bandwidth()/2:0);var h=p;null===h&&(p=u.bandwidth?u.bandwidth()/2:0),t.tooltipGraph&&t.tooltipGraph.data(t.values).x(function(t){return l(t.x)+p}).y(function(t){return c(t.y)}).color(function(e){return e.color||t.color}),r.point.fill(function(e){return e.color||t.color}).type(function(e){return e.symbol||t.symbol}).size(function(t){return t.size});var b=a.selectAll(".d2b-scatter-point").data(t.values,function(t){return t.key}),f=b.enter().append("g").attr("class","d2b-scatter-point"),g=b.merge(f).order(),y=b.exit();o!==i&&(g=g.transition(o),y=y.transition(o)),u.bandwidth||s.bandwidth||l.bandwidth||c.bandwidth?f.call(n,l,c,p,t.align):f.call(n,u,s,h,t.align),f.style("opacity",0),g.style("opacity",1).call(r.point).call(n,l,c,p,t.align),y.style("opacity",0).call(n,l,c,p,t.align).remove()}),l.each(function(){this.__scaleX=r.x.copy(),this.__scaleY=r.y.copy()}),a},o=b().values(function(t){return t.values}).y(function(t){return t.y}).x(function(t){return t.x}),i=e.nest().key(function(t){var e=t.stackBy;return e!==!1&&null!==e?e:I()});return s(a,r).addProp("point",A().active(!0)).addProp("stack",o.stack(),null,function(t){return o.stack(t)}).addProp("x",e.scaleLinear()).addProp("y",e.scaleLinear()).addPropGet("type","scatter").addPropFunctor("graphs",function(t){return t}).addPropFunctor("align","y1").addPropFunctor("tooltipGraph",function(t){return t.tooltipGraph}).addPropFunctor("shift",null).addPropFunctor("stackBy",null).addPropFunctor("key",function(t){return t.label}).addPropFunctor("values",function(t){return t.values}).addPropFunctor("color",function(t){return U(t.label)}).addPropFunctor("symbol",function(){return e.symbolCircle}).addPropFunctor("px",function(t){return t.x}).addPropFunctor("py",function(t){return t.y}).addPropFunctor("pcolor",null).addPropFunctor("psymbol",null).addPropFunctor("pkey",function(t,e){return e}).addPropFunctor("psize",25).addMethod("getComputedGraphs",function(e){return(e.selection?e.selection():e).data().map(function(e,n){return t(e,n)})}).addMethod("getVisiblePoints",function(t){var e=a.getComputedGraphs(t);return e.map(function(t){return[].concat.apply([],t.map(function(t){return t.values.map(function(e){return{x:e.x,y:e[t.align],graph:t}})}))})[0]}),a}function T(){function t(t){return"horizontal"===t?{rotate:!0,px:"py",py:"px",x:"y",y:"x",w:"height",h:"width"}:{rotate:!1,px:"px",py:"py",x:"x",y:"y",w:"width",h:"height"}}function n(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t(p.orient(e,n)),o=p.graphs(e,n).map(function(t,e){var n={data:t,index:e,tooltipGraph:p.tooltipGraph(t,e),shift:p.shift(t,e),stackBy:p.stackBy(t,e),key:p.key(t,e),color:p.color(t,e)};return n.values=p.values(t,e).map(function(t,e){return{data:t,index:e,graph:n,key:p.pkey(t,e),x:p.px(t,e),y:p.py(t,e),centered:p.pcentered(t,e),color:p.pcolor(t,e)}}),n});return f.x(function(t){return t[a.x]}).y(function(t){return t[a.y]}),g.entries(o).forEach(function(t,e){return f.out(r(e))(t.values)}),u(o,p.baseline(e,n)),o}function r(t){var e={};return function(n,r,a,o){var i=e[o]=e[o]||[0,0];n.dy=a-r,n.stackIndex=t,n.base=o,n.dy>0?n.extent=[i[0],i[0]+=n.dy]:n.extent=[i[1],i[1]+=n.dy]}}function o(t,e){t.style("opacity",e.opacity).call(i,e,e.orientMap).select("rect").attr("fill",function(t){return t.color||e.graph.color}).attr(e.orientMap.w,e.width).attr(e.orientMap.h,e.height)}function i(t,e,n){t.attr("transform",function(t){var r=e[n.x](t),a=e[n.y](t);return"translate("+[r,a]+")"})}function l(t,e,n,r){return function(a,o){var i=a.centered?o-e/4:o-e/2+a.stackIndex*n+r;return t(a.base)+i}}function c(t){var n=function(e){return[t(e.extent[0]),t(e.extent[1])]};return n.sorted=function(t){return n(t).slice().sort(e.ascending)},n}function d(t,n,r){var a=[],o=1/0;n.forEach(function(e){var n=e.values,i=t.range();o=Math.min(o,Math.abs(i[1]-i[0])),n.forEach(function(e){a.push(t(e[r.x]))})}),a.sort(e.ascending);for(var i=0;i<a.length-1;i++)a[i+1]!==a[i]&&(o=Math.min(a[i+1]-a[i],o));return o===1/0?0:o}function u(t,n){if(null===n){var r=[].concat.apply([],t.map(function(t){return t.values})),a=e.extent(r.map(function(t){return t.extent[1]}));n=a[1]<0?a[1]:a[0]>0?a[0]:0}t.forEach(function(t){t.values.forEach(function(t){Math.abs(t.extent[0])<Math.abs(n)&&(t.extent[0]=n)})})}var p={},h=function r(i){var u=i.selection?i.selection():i,s={x:p.x,y:p.y};return u.each(function(r,h){var b=p.orient(r,h),f=t(b),y=n(r,h,f),v=s[f.x].copy(),m=s[f.y].copy(),x=p.padding(r,h),P=p.groupPadding(r,h),w=p.bandwidth(r,h);w=(1-x)*a(w||d(v,y,f));var k=g.entries(y),F=w/Math.max(1,k.length);P*=F;var _=l(v,w,F,P),A=c(m);F-=2*P;var M=e.select(this).selectAll(".d2b-bar-graphs").data(function(t){return[t]});M=M.merge(M.enter().append("g").attr("class","d2b-bar-graphs"));var z=M.node(),E=z.__scaleBase||_,B=z.__scaleY||m,R=z.__scaleX||v,G=z.__barWidth||F,T=M.selectAll(".d2b-bar-graph").data(y,function(t){return t.key}),C=T.enter().append("g").attr("class","d2b-bar-graph d2b-graph"),S=T.merge(C).order(),O=T.exit();i!==u&&(S=S.transition(i),O=O.transition(i),O.each(function(t){var n=t.shift;null===n&&(n=v.bandwidth?v.bandwidth()/2:0);var r=e.select(this).selectAll(".d2b-bar-group").transition(i);R.bandwidth||B.bandwidth||v.bandwidth||m.bandwidth?r.style("opacity",0):r.call(o,{opacity:0,x:function(t){return _(t,n)},y:function(){return m(0)},width:F,height:0,graph:t,orientMap:f})})),O.remove(),S.each(function(t){var n=e.select(this),r=t.shift;null===r&&(r=v.bandwidth?v.bandwidth()/2:0);var a=n.selectAll(".d2b-bar-group").data(t.values,function(t){return t.key}),l=a.enter().append("g").attr("class","d2b-bar-group");l.append("rect");var c=a.merge(l).order(),d=a.exit();t.tooltipGraph&&t.tooltipGraph.data(t.values)[f.x](function(t){return v(t.base)+r})[f.y](function(t){return A(t)[1]}).color(function(e){return e.color||t.color}),i!==u&&(c=c.transition(i),d=d.transition(i)),l.attr("class","d2b-bar-group"),d.remove(),R.bandwidth||B.bandwidth||v.bandwidth||m.bandwidth?(l.call(o,{opacity:0,x:function(t){return _(t,r)},y:function(){return m(0)},width:G,height:0,graph:t,orientMap:f}),d.style("opacity",0)):(l.call(o,{opacity:0,x:function(t){return E(t,r)},y:function(){return B(0)},width:G,height:0,graph:t,orientMap:f}),d.call(o,{opacity:0,x:function(t){return _(t,r)},y:function(){return m(0)},width:F,height:0,graph:t,orientMap:f})),c.call(o,{opacity:1,x:function(t){return _(t,r)},y:function(t){return A.sorted(t)[0]},width:F,height:function(t){return A.sorted(t)[1]-A.sorted(t)[0]},graph:t,orientMap:f})}),z.__scaleY=m,z.__scaleX=v,z.__scaleBase=_,z.__barWidth=F}),r},f=b().values(function(t){return t.values}),g=e.nest().key(function(t){return t.stackBy});return s(h,p).addProp("x",e.scaleLinear()).addProp("y",e.scaleLinear()).addPropGet("type","bar").addPropFunctor("graphs",function(t){return t}).addPropFunctor("padding",.5).addPropFunctor("groupPadding",0).addPropFunctor("bandwidth",null).addPropFunctor("baseline",0).addPropFunctor("tooltipGraph",function(t){return t.tooltipGraph}).addPropFunctor("orient","vertical").addPropFunctor("shift",null).addPropFunctor("stackBy",function(t,e){return e}).addPropFunctor("key",function(t){return t.label}).addPropFunctor("values",function(t){return t.values},null).addPropFunctor("color",function(t){return U(t.label)}).addPropFunctor("px",function(t){return t.x}).addPropFunctor("py",function(t){return t.y}).addPropFunctor("pcentered",!1).addPropFunctor("pcolor",null).addPropFunctor("pkey",function(t,e){return e}).addMethod("getComputedGraphs",function(t){return(t.selection?t.selection():t).data().map(function(t,e){return n(t,e)})}).addMethod("getVisiblePoints",function(e){return(e.selection?e.selection():e).data().map(function(e,r){var a=p.orient(e,r),o=t(a),i=n(e,r,o),l=[].concat.apply([],i.map(function(t){return t.values.map(function(e){var n={};return n[""+o.x]=e.base,n[""+o.y]=e.extent[0],n.graph=t,n})})),c=[].concat.apply([],i.map(function(t){return t.values.map(function(e){var n={};return n[""+o.x]=e.base,n[""+o.y]=e.extent[1],n.graph=t,n})}));return l.concat(c)})[0]}),h}function C(){function t(e,n,r){return{data:e,index:n,graph:r,x:p.px(e,n),y:p.py(e,n),color:p.pcolor(e,n)||r.color,symbol:p.psymbol(e,n)||r.symbol,key:p.pkey(e,n),size:p.psize(e,n),indicator:p.pindicator(e,n),children:(p.pchildren(e,n)||[]).map(function(e,n){return t(e,n,r)})}}function n(e,n){var r=p.graphs(e,n).map(function(e,n){var r={data:e,index:n,tendancy:p.tendancy(e,n),tooltipGraph:p.tooltipGraph(e,n),shift:p.shift(e,n),key:p.key(e,n),color:p.color(e,n),symbol:p.symbol(e,n)};return r.values=p.values(e,n).map(function(e,n){return t(e,n,r)}),r});return r.forEach(function(t){return t.values.forEach(function(e){return u(e,t.tendancy)})}),r}function o(t,e){t.data.expanded=e,t.children.forEach(function(t){return o(t,e)})}function i(t,e){var n=5,r=5;t.selectAll(".d2b-bubble-indicator.d2b-active").attr("transform",function(){var t=this.getBBox();t.width+n>e&&n>0&&(n=5,r+=t.height+5);var a="translate("+n+", "+r+")";return n+=t.width+5,a})}function l(t,n,r,a,o){t.each(function(t){var i=e.select(this),l=i.attr("transform");l||i.attr("transform","translate("+(r(t.parent?t.parent.x:t.x)+o+",")+(a(t.parent?t.parent.y:t.y)+")")),t.children.length&&!t.data.expanded?i.attr("cursor","pointer").on("click",function(){e.select(this).dispatch("change",{bubbles:!0,cancelable:!0})}).on("change",function(t){return t.data.expanded=!t.data.expanded}):i.attr("cursor","").on("click",null),n&&(i=i.transition(n)),t.data.expanded?i.style("opacity",0).selectAll("*").remove():i.style("opacity",null).call(p.point),i.attr("transform","translate("+(r(t.x)+o)+", "+a(t.y)+")")})}function c(t){t.each(function(t){var n=e.select(this).classed("d2b-active",t.data.expanded);if(!t.data.expanded)return n.selectAll("rect, text, path").remove();var r=n.select("rect"),a=n.select("text"),i=n.select("path");r.size()||(r=n.append("rect")),a.size()||(a=n.append("text")),i.size()||(i=n.append("path")),a.text(function(t){return t.indicator.substring(0,5)}).attr("x",20);var l=a.node().getBBox();a.attr("y",l.height/1.35),r.on("click",function(){e.select(this).dispatch("change",{bubbles:!0,cancelable:!0})}).on("change",function(t){t.data.expanded=!t.data.expanded,t.data.expanded||o(t,!1)}).attr("width",l.width+25).attr("height",l.height).style("fill",p.point.fill()).style("stroke",p.point.stroke()),i.attr("d",function(t){return h.type(t.symbol)()}).attr("transform","translate(10, 9.5)").style("fill",p.point.stroke())})}function d(t,n,r,a,o,i,u,s,p,h,b){var f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,g=t.selectAll(".d2b-bubble-pack.d2b-depth-"+f).data(n,function(t){return t.key}),y=g.enter().append("g").attr("class","d2b-bubble-pack d2b-depth-"+f),v=g.merge(y),m=y.append("g").attr("class","d2b-bubble-point");b&&l(m,!1,i,u,s),m.style("opacity",0),l(v.select(".d2b-bubble-point"),r,a,o,s),y.append("g").attr("class","d2b-bubble-indicator"),c(v.select(".d2b-bubble-indicator")),v.each(function(t){var n=e.select(this),l=n.selectAll(".d2b-bubble-pack");l=r?l.transition(r):l,t.children.length&&t.data.expanded?d(n,t.children,r,a,o,i,u,s,p,h,b,f+1):(h&&h(t),l.remove().select(".d2b-bubble-point").style("opacity",0).attr("transform","translate("+[a(t.x)+s,o(t.y)]+")"))});var x=g.exit();r&&(x=x.transition(r)),x.remove()}function u(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t.children=t.children||[],t.leaves=t.children.length?[]:[t],t.depth=r,t.children.length&&t.children.forEach(function(e){u(e,n,r+1),e.parent=t,t.leaves=t.leaves.concat(e.leaves)}),t.size=a(t.size,e.sum(t.leaves,function(t){return t.size})),t.x=a(t.x,(n.x||n)(t.leaves,function(t){return t.x},function(t){return t.size})),t.y=a(t.y,(n.y||n)(t.leaves,function(t){return t.y},function(t){return t.size}))}var p={},h=e.symbol().size(80),b=function t(r){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=r.selection?r:null,l=r.selection?r.selection():r,c=l.selectAll(".d2b-bubble-pack-graphs").data(function(t){return[t]});c=c.merge(c.enter().append("g").attr("class","d2b-bubble-pack-graphs"));var u=c.selectAll(".d2b-bubble-pack-graph").data(function(t,e){return n(t,e)},function(t){return t.key}),s=u.enter().append("g").attr("class","d2b-bubble-pack-graph d2b-graph"),h=u.merge(s).order(),b=u.exit();return o&&(h=h.transition(o),b=b.transition(o)),h.style("opacity",1),b.style("opacity",0).remove(),r.each(function(n,r){var l=e.select(this),c=p.duration(n,r),u=l.selectAll(".d2b-bubble-pack-graph"),s=l.selectAll(".d2b-bubble-pack-graphs").node(),h=s.__d2bPreserveScaleX__||p.x,b=s.__d2bPreserveScaleY__||p.y;l.on("change",function(){l.transition().duration(c).call(t,!1)});var f=0;u.each(function(t){var n=e.select(this),r=p.x.range();f=Math.max(f,Math.abs(r[0]-r[1]));var i=t.shift;null===i&&(i=p.x.bandwidth?p.x.bandwidth()/2:0),p.point.active(function(t){return!!t.children.length}).fill(function(t){return t.color}).type(function(t){return t.symbol});var c=t.tooltipGraph?t.tooltipGraph.clear().x(function(t){return p.x(t.x)+i}).y(function(t){return p.y(t.y)}).color(function(t){return t.color}).addPoint:null;d(n,t.values,o,p.x,p.y,h,b,i,l,c,a)}),i(l,f)}),c.each(function(){this.__d2bPreserveScaleX__=p.x.copy(),this.__d2bPreserveScaleY__=p.y.copy()}),t};return s(b,p).addProp("point",A().size(function(t){return 100*t.size})).addProp("x",e.scaleLinear()).addProp("y",e.scaleLinear()).addPropGet("type","bubblePack").addPropFunctor("duration",250).addPropFunctor("graphs",function(t){return t}).addPropFunctor("tendancy",m,function(t){return arguments.length?(t&&t.tendancy?p.tendancy=function(){return t}:p.tendancy=r(t),b):p.tendancy}).addPropFunctor("tooltipGraph",function(t){return t.tooltipGraph}).addPropFunctor("shift",null).addPropFunctor("key",function(t){return t.label}).addPropFunctor("values",function(t){return t.values}).addPropFunctor("color",function(t){return U(t.label)}).addPropFunctor("symbol",function(){return e.symbolCircle}).addPropFunctor("px",function(t){return t.x}).addPropFunctor("py",function(t){return t.y}).addPropFunctor("psize",function(t){return t.size}).addPropFunctor("pchildren",function(t){return t.children}).addPropFunctor("pcolor",null).addPropFunctor("psymbol",null).addPropFunctor("pindicator",function(t){return t.label}).addPropFunctor("pkey",function(t,e){return e}).addMethod("getComputedGraphs",function(t){return(t.selection?t.selection():t).data().map(function(t,e){return n(t,e)})}).addMethod("getVisiblePoints",function(t){function e(t,n,r){t.data.expanded?t.children.forEach(function(t){return e(t,n,r)}):n.push({x:t.x,y:t.y,graph:r})}var n=b.getComputedGraphs(t);return n.map(function(t){return[].concat.apply([],t.map(function(t){var n=[];return t.values.forEach(function(r){return e(r,n,t)}),n}))})[0]}),b}function S(){function t(t){return n(e.hierarchy(t,y.children).sum(y.size))}function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t.key=y.key(t.data,e),t.color=y.color(t.data,e),t.label=y.label(t.data,e),t.children)return t.children.forEach(n),t}function r(t){var e=null;return t.each(function(t){t.data.selected&&(e=t)}),e||(e=t),e.data.selected=!0,e}function o(t,e){t.ancestors().concat(t.descendants()).filter(function(t){return t.depth<=e&&t.value>0}).forEach(function(t){return t.visible=!0})}function i(t,e,n,r){var a=y.innerRadius(t,e),o=y.outerRadius(t,e),i=y.ancestorPadding(t,e),l=y.ancestorRatio(t,e),c=0;n.each(function(t){t.visible&&(c=Math.max(c,t.depth))});var d=o-a-i,u=a+d*l,s=y.ancestorBanding.copy().range([a,u]).domain([0,r.depth+1]),p=y.descendantBanding.copy().range([u+i,o]).domain([r.depth+1,c+1]);return function(t){var e=void 0;return e=t<=r.depth?s:p,{inner:e(t),outer:e(t+1)}}}function c(t){return t>Math.PI?F(t)+90:F(t)-90}function d(t,e){var n=(e.inner-e.outer)/2.2;return t>Math.PI?-n:n}function p(t){return t>Math.PI?"end":"start"}function h(t,n,r,a,o,i){var s="arc"===n?l:u;t=t.filter(function(t){return t.visible}),y.pie.startAngle(a).endAngle(o),y.pie(t).forEach(function(t){var e=i.radii(t.data.depth);t.data.startAngle=t.startAngle,t.data.endAngle=t.endAngle,t.data.padAngle=t.padAngle,t.data.innerRadius=e.inner,t.data.outerRadius=e.outer,t.data.centerAngle=(t.startAngle+t.endAngle)/2,t.data.rotate=c(t.data.centerAngle),t.data.labelOffset=d(t.data.centerAngle,e),t.data.labelAnchor=p(t.data.centerAngle)});var f=e.select(this),g="d2b-sunburst-level-"+r,m=f.selectAll(".d2b-sunburst-"+n+"-group."+g),x=m.data();m=m.data(t,function(t){return t.key});var P=m.enter().append("g").attr("class","d2b-sunburst-"+n+"-group "+g),w=P.append("arc"===n?"path":"text").attr("class","d2b-sunburst-"+n+" "+g).each(function(e,n){var r=i.oldRadii(e.depth),a=e.neighbor||b(n,x,t);this.current={startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:r.inner,outerRadius:r.outer,rotate:c((a.startAngle+a.endAngle)/2)},e.children&&e.children.forEach(function(t){return t.neighbor=a})});P.append("g").attr("class","d2b-sunburst-"+n+"-children "+g),"arc"===n?w.style("fill",function(t){return t.color}):w.style("opacity",0).attr("y",4);var k=m.exit();m=m.merge(P),m.select(".d2b-sunburst-"+n+"."+g).classed("d2b-sunburst-ancestor",function(t){return t.depth<t.selected.depth}),i.transition&&(k.each(function(r,a){var o=b(a,t,x),l=e.select(this),u=l.selectAll(".d2b-sunburst-"+n).datum(function(t){var e=i.radii(t.depth);return t.innerRadius=e.inner,t.outerRadius=e.outer,t.startAngle=o.startAngle,t.endAngle=o.endAngle,t.centerAngle=o.centerAngle,t.rotate=c(t.centerAngle),t.labelOffset=d(t.centerAngle,e),t}).transition(i.transition).call(s,v);"label"===n&&u.style("opacity",0).attr("x",function(t){return t.labelOffset})}),k=k.transition(i.transition),m=m.transition(i.transition)),k.remove();var F=m.select(".d2b-sunburst-"+n+"."+g).call(s,v);"arc"===n?F.style("fill",function(t){return t.color}):F.text(function(t){return t.depth>=t.selected.depth?t.label:""}).style("opacity",1).attr("x",function(t){return t.labelOffset}).style("text-anchor",function(t){return t.labelAnchor}),m.select(".d2b-sunburst-"+n+"-children."+g).each(function(t){var e=t.children||[];h.call(this,e,n,r+1,t.startAngle,t.endAngle,i)})}function b(t,e,n){var r=f(t,e,n),a=g(t,e,n);return r?{startAngle:r.endAngle,endAngle:r.endAngle}:a?{startAngle:a.startAngle,endAngle:a.startAngle}:{startAngle:0,endAngle:0,centerAngle:0}}function f(t,e,n){for(var r=e.length;--t>=0;)for(var a=n[t].key,o=0;o<r;++o)if(e[o].key===a)return e[o]}function g(t,e,n){for(var r=n.length,a=e.length;++t<r;)for(var o=n[t].key,i=0;i<a;++i)if(e[i].key===o)return e[i]}var y={},v=e.arc(),m=function n(l){var c=l.selection?l.selection():l;return y.pie.value(function(t){return t.value}),c.each(function(d,u){var s=e.select(this),p=y.zoomable(d,u),b=y.highlight(d,u),f=y.innerRadius(d,u),g=y.showLabels(d,u),v=t(d),m=r(v);o(m,y.descendantLevels(d,u)+m.depth),v.each(function(t){return t.selected=m});var x=i(d,u,v,m);h.call(this,[v],"arc",0,y.startAngle(d,u),y.endAngle(d,u),{transition:l!==c?l:null,oldRadii:a(this.__radii,x),radii:x,zoomable:p}),h.call(this,g?[v]:[],"label",0,y.startAngle(d,u),y.endAngle(d,u),{transition:l!==c?l:null,oldRadii:a(this.__radii,x),radii:x});var P=s.selectAll(".d2b-sunburst-center");P.data([m]).enter().append("circle").attr("class","d2b-sunburst-center").merge(P).attr("cx",0).attr("cy",0).attr("r",Math.max(0,f)).on("click",function(t){t.parent&&(t.data.selected=!1,t.parent.data.selected=!0,s.transition().duration(y.duration(t,u)).call(n))}),this.__radii=x,s.selectAll("path.d2b-sunburst-arc").on("click",p?function(t){v.each(function(t){return t.data.selected=!1}),t.data.selected=!0,s.transition().duration(y.duration(d,u)).call(n)}:null).on("mouseover",b?function(t){var e=t.ancestors();s.selectAll(".d2b-sunburst-arc").classed("d2b-transparent",function(t){return e.indexOf(t)===-1}),s.selectAll(".d2b-sunburst-label").classed("d2b-transparent",function(t){return e.indexOf(t)===-1})}:null).on("mouseout",function(){s.selectAll(".d2b-sunburst-arc").classed("d2b-transparent",!1),s.selectAll(".d2b-sunburst-label").classed("d2b-transparent",!1)})}),n};return s(m,y).addProp("pie",e.pie().sort(null)).addProp("ancestorBanding",e.scaleLinear()).addProp("descendantBanding",e.scalePow().exponent(.85)).addPropFunctor("duration",250).addPropFunctor("innerRadius",30).addPropFunctor("outerRadius",200).addPropFunctor("ancestorPadding",10).addPropFunctor("ancestorRatio",.2).addPropFunctor("descendantLevels",1/0).addPropFunctor("startAngle",0).addPropFunctor("endAngle",2*Math.PI).addPropFunctor("showLabels",!1).addPropFunctor("zoomable",!0).addPropFunctor("highlight",!0).addPropFunctor("key",function(t){return y.label(t)}).addPropFunctor("label",function(t){return t.label}).addPropFunctor("color",function(t){return U(y.label(t))}).addPropFunctor("children",function(t){return t.children}).addPropFunctor("size",function(t){return t.size}),m}function O(){function t(t,e,n,r,a){var o=[],i=[],l=t.data;l&&(u(t,l,e,n,r),o=[l],t.info.showGrid&&(i=[l])),t.update=n.selectAll(".d2b-"+t.type+"-axis").data(o),t.enter=t.update.enter().append("g").attr("class","d2b-axis d2b-"+t.type+"-axis"),t.labelEnter=t.enter.append("text").attr("class","d2b-axis-label"),t.svg=t.enter.merge(t.update),t.label=t.svg.select(".d2b-axis-label"),t.update.exit().remove(),t.gridUpdate=n.selectAll(".d2b-"+t.type+"-grid").data(i),t.gridEnter=t.gridUpdate.enter().append("g").attr("class","d2b-grid d2b-"+t.type+"-grid"),t.gridUpdate.exit().remove(),t.grid=t.gridEnter.merge(t.gridUpdate),a&&(t.svg=t.svg.transition(a),t.update=t.update.transition(a),t.grid=t.grid.transition(a),t.gridUpdate=t.gridUpdate.transition(a),t.label=t.label.transition(a))}function n(t,e,n,r){t.data&&(c(t),d(t,e),t.enter.call(t.info.axis).attr("transform","translate("+n+", "+r+")"),t.update.call(t.info.axis).attr("transform","translate("+n+", "+r+")"),t.svg.call(y,t).on("end",function(){t.svg.call(y,t)}))}function r(t,e,n){t.data&&(l(t,n),d(t,e),t.gridUpdate.call(t.info.axis).selectAll(".tick text").remove(),t.gridEnter.call(t.info.axis).selectAll(".tick text").remove())}function i(t,e){t.data&&(t.labelEnter.text(t.info.label).attr("x",f(t,e)).attr("y",b(t)).attr("text-anchor",p(t)),t.label.text(t.info.label).attr("x",f(t,e)).attr("y",b(t)).attr("text-anchor",p(t)))}function l(t,e){if(t.data)switch(t.type){case"x":return t.info.axis.tickSize("inner"===t.info.orient?-e:e);case"x2":return t.info.axis.tickSize("inner"===t.info.orient?e:-e);case"y":return t.info.axis.tickSize("inner"===t.info.orient?e:-e);case"y2":return t.info.axis.tickSize("inner"===t.info.orient?-e:e)}}function c(t){t.data&&t.info.axis.tickSizeOuter(0).tickSizeInner(t.info.tickSize)}function d(t,e){t.data&&(["y","y2"].indexOf(t.type)>-1?t.info.axis.scale().range([e,0]):t.info.axis.scale().range([0,e]))}function u(t,e,n,r,o){if(t.data){var i=t.info={};i.axis=x.axis(e,n),i.orient=x.orient(e,n),i.wrapLength=x.wrapLength(e,n),i.label=a(x.label(e,n),""),i.labelOrient=x.labelOrient(e,n),i.tickSize=x.tickSize(e,n),i.showGrid=x.showGrid(e,n),i.labelOrient1=i.labelOrient.split(" ")[0],i.labelOrient2=i.labelOrient.split(" ")[1],i.wrapAnchor=h(t),c(t),d(t,o);var l=r.append("g").attr("class","d2b-axis d2b-"+t.type+"-axis").call(i.axis).call(y,t);i.axisBox=l.node().getBBox();var u=l.append("text").attr("class","d2b-axis-label d2b-"+t.type+"-label").text(i.label);i.labelBox=u.node().getBBox(),l.remove()}}function p(t){if(t.data){var e=t.info,n=["y","y2"].indexOf(t.type)>-1;return"start"===e.labelOrient2&&n?"end":"end"!==e.labelOrient2||n?"middle"===e.labelOrient2?"middle":"start":"end"}}function h(t){if(t.data)switch(t.type){case"x":return"inner"===t.info.orient?"end":"start";case"x2":return"outer"===t.info.orient?"end":"start";case"y":case"y2":return"middle";default:return"start"}}function b(t){if(t.data){var e=t.info;switch(t.type+" "+e.orient+" "+e.labelOrient1){case"x inner inner":case"x2 outer outer":return-e.axisBox.height-P;case"x inner outer":case"x2 outer inner":return e.labelBox.height+P;case"x outer inner":case"x2 inner outer":case"y inner outer":case"y2 outer inner":return-P;case"x outer outer":case"x2 inner inner":return e.labelBox.height+e.axisBox.height+P;case"y inner inner":case"y2 outer outer":return e.labelBox.height+e.axisBox.width+P;case"y outer inner":case"y2 inner outer":return e.labelBox.height+P;case"y outer outer":case"y2 inner inner":return-e.axisBox.width-P}}}function f(t,e){if(t.data)return"start"===t.info.labelOrient2?0:"middle"===t.info.labelOrient2?e/2:e}function g(t){var e={top:0,left:0,right:0,bottom:0};return t.x.data&&("outer"===t.x.info.orient&&(e.bottom+=t.x.info.axisBox.height),"outer"===t.x.info.labelOrient1&&(e.bottom+=t.x.info.labelBox.height+P)),t.x2.data&&("outer"===t.x2.info.orient&&(e.top+=t.x2.info.axisBox.height),"outer"===t.x2.info.labelOrient1&&(e.top+=t.x2.info.labelBox.height)),t.y.data&&("outer"===t.y.info.orient&&(e.left+=t.y.info.axisBox.width),"outer"===t.y.info.labelOrient1&&(e.left+=t.y.info.labelBox.height)),t.y2.data&&("outer"===t.y2.info.orient&&(e.right+=t.y2.info.axisBox.width),"outer"===t.y2.info.labelOrient1&&(e.right+=t.y2.info.labelBox.height+P)),e.top=Math.max(e.top,10),e.bottom=Math.max(e.bottom,10),e.left=Math.max(e.left,10),e.right=Math.max(e.right,10),e}function y(t,n){if(n.data){var r=n.info.wrapLength,i=n.info.wrapAnchor;t.selectAll(".tick text").each(function(){var t=e.select(this);a(t.html(),"").indexOf("tspan")===-1&&(this.storeText=t.text()),t.text("")}).call(o,function(){return this.storeText},r,i)}}function v(t){return"number"==typeof t?{top:t,left:t,right:t,bottom:t}:t}function m(t){return v(t||0)}var x={},P=5,w=function a(o){var l=o.selection?o.selection():o;return l.each(function(a,c){var d=x.size.call(this,a,c)||{width:960,height:500},u=m(x.margin.call(this,a,c)),s=x.x.call(this,a,c),p=x.x2.call(this,a,c),h=x.y.call(this,a,c),b=x.y2.call(this,a,c),f=e.select(this),y={x:{type:"x",data:s},x2:{type:"x2",data:p},y:{type:"y",data:h},y2:{type:"y2",data:b}},P=v(x.padding.call(this,a,c)),w=f.selectAll(".d2b-plane").data([a]),k=w.enter().append("g").attr("class","d2b-plane"),F=w.merge(k),_=this.__clipID=this.__clipID||"d2b-clip-plane-"+I();k.append("defs").append("clipPath").attr("id",_).attr("class","d2b-clip-plane").append("rect");var A=o!==l?o:null;t(y.x,c,F,d.width,A),t(y.x2,c,F,d.width,A),t(y.y,c,F,d.height,A),t(y.y2,c,F,d.height,A),
P||(P=g(y));var M={top:P.top+u.top,bottom:P.bottom+u.bottom,left:P.left+u.left,right:P.right+u.right};M.width=d.width-M.left-M.right,M.height=d.height-M.top-M.bottom,this.__box__=M,A&&(w=w.transition(A)),k.attr("transform","translate("+M.left+", "+M.top+")"),w.attr("transform","translate("+M.left+", "+M.top+")"),n(y.x,M.width,0,M.height),n(y.x2,M.width,0,0),n(y.y,M.height,0,0),n(y.y2,M.height,M.width,0),r(y.x,M.width,M.height),r(y.x2,M.width,M.height),r(y.y,M.height,M.width),r(y.y2,M.height,M.width),i(y.x,M.width),i(y.x2,M.width),i(y.y,-M.height),i(y.y2,-M.height),F.select(".d2b-clip-plane").select("rect").attr("width",M.width+1).attr("height",M.height+1),F.selectAll(".d2b-grid").attr("clip-path","url(#"+_+")")}),a};return s(w,x).addPropFunctor("size",function(t){return t.size}).addPropFunctor("padding",null).addPropFunctor("margin",0).addPropFunctor("x",function(t){return t.x}).addPropFunctor("x2",function(t){return t.x2}).addPropFunctor("y",function(t){return t.y}).addPropFunctor("y2",function(t){return t.y2}).addPropFunctor("axis",function(t){return t.axis}).addPropFunctor("orient",function(t){return t.orient||"outer"}).addPropFunctor("wrapLength",function(t){return a(t.wrapLength,1/0)}).addPropFunctor("tickSize",function(t){return a(t.tickSize,6)}).addPropFunctor("showGrid",function(t){return t.showGrid!==!1}).addPropFunctor("label",function(t){return t.label}).addPropFunctor("labelOrient",function(t){return t.labelOrient||"outer middle"}).addMethod("box",function(t){var e=t.node?t.node():t;return e?e.__box__:null}),w}function L(){function t(t,l){var s=e.select(this),p=s.select(".d2b-chart-container"),h=p.node().__size__,b=o.radius(t,h.width,h.height),f=o.donutRatio(t),g=o.legend.empty(),y=o.values(t),v=y.filter(function(t){return!g(t)});o.pie.values(v),o.legend.values(y),s.select(".d2b-legend-container").call(o.legend).on("change",function(){return s.transition(o.duration(t)).call(i)}).selectAll(".d2b-legend-item").on("mouseover",function(t){r.call(this,s,t)}).on("mouseout",function(t){a.call(this,s,t)});var m=e.sum(v,function(t){return o.value(t)}),x=p.selectAll(".d2b-pie-chart").data([v]),P=x.enter().append("g").attr("class","d2b-pie-chart");x=x.merge(P),l&&(x=x.transition(l)),o.pie.arc().innerRadius(b*f).outerRadius(b),x.call(o.pie);var w=p.selectAll(".d2b-pie-arc").each(function(t){t.__innerRadius__=b*f,t.__outerRadius__=b,t.__percent__=t.value/m}).on("mouseover",function(t){r.call(this,s,t.data)}).on("mouseout",function(t){a.call(this,s,t.data)}).call(o.tooltip),k=w.selectAll(".d2b-pie-arc-percent").data(function(t){return[t]});k.enter().append("g").attr("class","d2b-pie-arc-percent").append("text").attr("y",6),w.each(function(){var t=e.select(this),n=t.select(".d2b-pie-arc path").node().current,r=t.select(".d2b-pie-arc-percent"),a=r.select("text").node();r.node().current=n,a.current=a.current||0}),l&&(w=w.each(function(){this.transitioning=!0}).transition(l).on("end",function(){this.transitioning=!1})),w.select(".d2b-pie-arc-percent").call(u,o.pie.arc()).select("text").call(d,function(t){return o.value(t.data)/m},c).style("opacity",function(t){return o.showPercent.call(this,t.data,m)?1:0});var F=n(t,b,h);P.attr("transform","translate("+F.x+", "+F.y+")"),x.attr("transform","translate("+F.x+", "+F.y+")")}function n(t,e,n){var r=o.at(t,n.width,n.height,e);if("object"!==("undefined"==typeof r?"undefined":H(r))){r=r.split(" ");var a={x:r[1],y:r[0]};switch(r={},a.x){case"left":r.x=e;break;case"center":case"middle":r.x=n.width/2;break;case"right":default:r.x=n.width-e}switch(a.y){case"bottom":r.y=n.height-e;break;case"center":case"middle":r.y=n.height/2;break;case"top":default:r.y=e}}return r}function r(t,e){var n=o.pie.arc();n.outerRadius(function(t){return t.outerRadius}).innerRadius(function(t){return t.innerRadius}),t.selectAll(".d2b-pie-arc").filter(function(t){return t.data===e}).each(function(t){t.outerRadius=1.03*t.__outerRadius__,t.innerRadius=t.__innerRadius__}).select("path").transition().duration(100).call(l,n)}function a(t,e){var n=o.pie.arc();n.outerRadius(function(t){return t.outerRadius}).innerRadius(function(t){return t.innerRadius}),t.selectAll(".d2b-pie-arc").filter(function(t){return t.data===e}).each(function(t){t.outerRadius=t.__outerRadius__,t.innerRadius=t.__innerRadius__}).select("path").transition().duration(100).call(l,n)}var o={},i=function n(r){r.call(o.chartFrame),o.pie.value(o.value).color(o.color).key(o.key),o.legend.html(o.label).key(o.key).color(o.color),o.tooltip.color(function(t){return e.rgb(o.color(t.data)).darker(.3)});var a=r.selection?r.selection():r;return a.each(function(e){t.call(this,e,r!==a?r:null)}),n},c=e.format(".0%");return s(i,o).addProp("chartFrame",y().legendEnabled(!0).breadcrumbsEnabled(!1)).addProp("legend",g().clickable(!0).dblclickable(!0)).addProp("key",function(t){return t.label}).addProp("pie",z()).addProp("tooltip",p().followMouse(!0).html(function(t){return"<b>"+o.label(t.data)+"</b>: "+o.value(t.data)+" ("+c(t.__percent__)+")"})).addPropFunctor("values",function(t){return t}).addPropFunctor("duration",250).addPropFunctor("donutRatio",0).addPropFunctor("at","center center").addPropFunctor("showPercent",function(t,e){return o.value(t)/e>.03}).addPropFunctor("radius",function(t,e,n){return Math.min(e,n)/2}).addPropFunctor("color",function(t){return U(t.label)}).addPropFunctor("value",function(t){return t.value}).addPropFunctor("label",function(t){return t.label}),i}function X(){function t(t,o){var s=e.select(this),b=s.select(".d2b-chart-container"),g=b.node(),y=s.select(".d2b-legend-container"),m=b.node().__size__,x=r(t),w=i(x),k=f.duration(t),F=n(t,x);l(F);var _=g.tooltip=g.tooltip||h().trackX(!0).trackY(!1).threshold(50);_.title(function(t){return""+a(t[0].x,t[0].x1)}).clear(),f.legend.values(F),y.call(f.legend).on("change",function(){return s.transition().duration(k).call(v)}).selectAll(".d2b-legend-item").on("mouseover",function(t){return c(t,b)}).on("mouseout",function(t){return d(t,b)}),f.plane.size(m);var A=b.selectAll(".d2b-axis-plane").data([t]),M=A,z=A.enter().append("g").attr("class","d2b-axis-plane");A=A.merge(z);var E=b.selectAll(".d2b-axis-wrapper").data([t]),B=E,R=E.enter().append("g").attr("class","d2b-axis-wrapper");R.append("rect").attr("class","d2b-axis-background"),E=E.merge(R);var G=E.selectAll(".d2b-axis-set").data(x),T=G.enter().append("g").attr("class","d2b-axis-set"),C=G.exit();G=G.merge(T).order(),o&&(C=C.transition(o),B=B.transition(o),M=M.transition(o));var S={x:[],x2:[],y:[],y2:[]};G.each(function(t){var n=e.select(this);this.genUpdate=n.selectAll(".d2b-graph-generator").data(t.generators,function(t){return t.key}),this.genEnter=this.genUpdate.enter().append("g").attr("class","d2b-graph-generator").style("opacity",0),this.genExit=this.genUpdate.exit(),this.gen=this.genUpdate.merge(this.genEnter).order(),this.gen.each(function(n,r){var a=e.select(this),o=n.generator.tooltipGraph(function(t){if(r)return null;var e=_.graph(I());return u(t,w).tooltipConfig(e),e}).color(function(t){return u(t,w).color}).graphs(t.graphs.map(function(t){return t.data}).filter(function(t){return!t.hidden})).getVisiblePoints(a);n.generator.duration&&n.generator.duration(k),o.forEach(function(e){S[t.xType].push(e.x),S[t.yType].push(e.y)})})});var O=f.x(t,S.x),L=f.y(t,S.y),X=f.x2(t,S.x2),Y=f.y2(t,S.y2);p(O,S.x,P.x),p(L,S.y,P.y),p(X,S.x2,P.x2),p(Y,S.y2,P.y2),f.plane.axis(function(t){return t.__axis__}).x(O.__axis__?O:null).y(L.__axis__?L:null).x2(X.__axis__?X:null).y2(Y.__axis__?Y:null),z.call(f.plane),M.call(f.plane);var N=f.plane.box(A);G.attr("clip-path","url(#"+A.select(".d2b-clip-plane").attr("id")+")"),G.each(function(t){var n="x2"===t.xType?X.__axis__:O.__axis__,r="y2"===t.yType?Y.__axis__:L.__axis__;o&&(this.genUpdate=this.genUpdate.transition(o),this.genExit=this.genExit.transition(o).style("opacity",0)),this.genExit.remove(),this.gen.each(function(t){var a=e.select(this);o&&(a=a.transition(o)),t.generator.x(n.scale()).y(r.scale()),a.style("opacity",1).call(t.generator)}),e.select(this).on("change",function(){return s.transition().duration(k).call(v)})}),C.style("opacity",0).remove(),R.attr("transform","translate("+N.left+", "+N.top+")").select("rect.d2b-axis-background").attr("height",Math.max(0,N.height)).attr("width",Math.max(0,N.width)),B.attr("transform","translate("+N.left+", "+N.top+")").select("rect.d2b-axis-background").attr("height",Math.max(0,N.height)).attr("width",Math.max(0,N.width)),_.row(function(t){var e=u(t.graph.data,w).label;return e+": "+a(t.y,t.y1)}),f.tooltipConfig(_),_.svgContainer(E).tracker(E).size(N)}function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r(t),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i(e),a=n.filter(function(t){return!t.group});return a.forEach(function(t){t.groupType="graph",t.groupGraphs=[t]}),(f.groups(t)||[]).map(function(t){var e={groupType:"group",data:t,label:f.groupLabel(t),color:f.groupColor(t)};return e.groupGraphs=n.filter(function(t){return e.label===t.group}),e.groupGraphs.forEach(function(t){t.color=e.color}),e}).concat(a)}function r(t){return f.sets(t).map(function(t){var e={};return{data:t,xType:f.setXType(t)||"x",yType:f.setYType(t)||"y",generators:f.setGenerators(t).map(function(t){var n=t.type();return e[n]=e[n]||0,{data:t,key:n+"-"+(e[n]+=1),generator:t}}),graphs:o(t)}})}function o(t){return f.setGraphs(t).map(function(t){return{data:t,label:f.graphLabel(t)||"",color:f.graphColor(t),group:f.graphGroup(t),tooltipConfig:f.graphTooltipConfig||function(){}}})}function i(t){return[].concat.apply([],t.map(function(t){return t.graphs}))}function l(t){t.forEach(function(t){t.groupGraphs.forEach(function(e){return e.data.hidden=t.data.hidden})})}function c(t,e){var n=e.selectAll(".d2b-graph");t.groupGraphs.some(function(t){return!t.data.hidden})&&n.style("opacity",.2).filter(function(e){return t.data===e.data||(t.groupGraphs.map(function(t){return t.data})||[]).indexOf(e.data)>-1}).style("opacity","")}function d(t,e){e.selectAll(".d2b-graph").style("opacity",1)}function u(t,e){return e.filter(function(e){return e.data===t||e.data===t.data})[0]}function p(t,e,n){e.length||(t.hidden=!0);var r=t.axis||n.axis,a=t.scale?t.scale.copy():b(e,n),o=a.domain();if(!a.bandwidth&&t.linearPadding){var i=o[1]-o[0];o[0]=o[0]+i*t.linearPadding[0],o[1]=o[1]+i*t.linearPadding[1]}a.domain(o),t.__axis__=r.scale(a)}function b(t,n){var r=t.some(function(t){return isNaN(t)}),a=r?e.set(t).values():e.extent(t).map(function(t){return t||0}),o=r?n.band:n.linear;return o.domain(a)}var f={},v=function e(n){n.call(f.chartFrame),f.legend.empty(function(t){return t.data.hidden}).setEmpty(function(t,e,n){return t.data.hidden=n}).html(function(t){return t.label}).key(function(t){return t.label}).color(function(t){return t.color});var r=n.selection?n.selection():n;return r.each(function(e){t.call(this,e,n!==r?n:null)}),e};s(v,f).addProp("plane",O()).addProp("chartFrame",y().legendEnabled(!0).breadcrumbsEnabled(!1)).addProp("legend",g().clickable(!0).dblclickable(!0)).addPropFunctor("tooltipConfig",function(t){return t.tooltipConfig}).addPropFunctor("duration",250).addPropFunctor("x",{}).addPropFunctor("y",{}).addPropFunctor("x2",{}).addPropFunctor("y2",{}).addPropFunctor("groups",function(t){return t.groups}).addPropFunctor("sets",function(t){return t.sets}).addPropFunctor("groupLabel",function(t){return t.label}).addPropFunctor("groupColor",function(t){return U(f.groupLabel(t))}).addPropFunctor("setGenerators",function(t){return t.generators}).addPropFunctor("setXType",function(t){return t.xType}).addPropFunctor("setYType",function(t){return t.yType}).addPropFunctor("setGraphs",function(t){return t.graphs}).addPropFunctor("graphLabel",function(t){return t.label}).addPropFunctor("graphGroup",function(t){return t.group}).addPropFunctor("graphColor",function(t){return U(f.graphLabel(t))}).addPropFunctor("graphTooltipConfig",function(t){return t.tooltipConfig});var m=e.scaleBand(),x=e.scaleLinear(),P={x:{band:m.copy(),linear:x.copy(),axis:e.axisBottom()},y:{band:m.copy(),linear:x.copy(),axis:e.axisLeft()},x2:{band:m.copy(),linear:x.copy(),axis:e.axisTop()},y2:{band:m.copy(),linear:x.copy(),axis:e.axisRight()}};return v}function Y(){function t(t,e){t.select(".d2b-breadcrumbs-container").datum(e).transition("sunburst-breadcrumbs").duration(100).call(a.breadcrumbs)}function n(e){var r=e.select(".d2b-sunburst-chart"),o=e.selectAll(".d2b-sunburst-arc.d2b-sunburst-level-0").datum(),i=o.selected;t(e,[i]),r.selectAll(".d2b-sunburst-arc").call(a.tooltip.clear).call(a.tooltip).on("mouseover.breadcrumbs",function(n){var r=n.ancestors();r=r.slice(0,r.indexOf(i)+1),t(e,r.reverse())}).on("mouseout.breadcrumbs",function(){return t(e,[i])}),r.on("mouseout",function(){return n(e)}).on("click",function(){return n(e)})}function r(t,r){var o=e.select(this),i=o.select(".d2b-chart-container"),l=i.node().__size__,c="translate("+l.width/2+", "+l.height/2+")",d=i.selectAll(".d2b-sunburst-chart").data(function(t){return[t]}),u=d.enter().append("g").attr("transform",c).attr("class","d2b-sunburst-chart");d=d.merge(u),r&&(d=d.transition(r)),a.sunburst.outerRadius(a.outerRadius(t,l.width,l.height)).innerRadius(a.innerRadius(t,l.width,l.height)),d.attr("transform",c).call(a.sunburst),n(o)}var a={},o=function t(e){e.call(a.chartFrame),a.sunburst.label(a.label).color(a.color),a.breadcrumbs.color(function(t){return a.color(t.data)}).key(function(t,e){return e}),a.tooltip.color(function(t){return a.color(t.data)});var n=e.selection?e.selection():e;return n.each(function(t){r.call(this,t,e!==n?e:null)}),t};s(o,a).addProp("chartFrame",y().legendEnabled(!1).breadcrumbsEnabled(!0)).addProp("sunburst",S()).addProp("breadcrumbs",f().html(function(t){return"<div class = 'd2b-sunburst-breadcrumb'>"+c(t)+"</div>"})).addProp("tooltip",p().followMouse(!0).html(function(t){return"<div class = 'd2b-sunburst-tooltip'>"+c(t)+"</div>"})).addPropFunctor("label",function(t){return t.label}).addPropFunctor("color",function(t){return U(a.label(t))}).addPropFunctor("outerRadius",function(t,e,n){return Math.min(e,n)/2}).addPropFunctor("innerRadius",function(t,e,n){return Math.min(50,Math.min(e,n)/4)});var i=e.format(",.0f"),l=e.format(".1%"),c=function(t){var e=t.value/t.selected.value,n=e>1?"":"<div class = 'd2b-sunburst-percent'>\n        "+l(t.value/t.selected.value)+"\n      </div>";return"\n      <div class = 'd2b-sunburst-label'>\n        "+a.label(t.data)+"\n      </div>\n      <div class = 'd2b-sunburst-value'>\n        "+i(t.value)+"\n        "+n+"\n      </div>\n    "};return o}n('@import "//netdna.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.css";.d2b-vue-container{width:100%;height:100%}.d2b-pie-chart .d2b-pie-arc path{stroke-width:1px;stroke:#fff}.d2b-pie-chart .d2b-pie-arc text{fill:#fff;font-weight:700;pointer-events:none;text-anchor:middle}.d2b-axis-wrapper .d2b-axis-background{opacity:0}.d2b-chart-breadcrumbs{width:200px;padding-left:10px}.d2b-sunburst-breadcrumb .d2b-sunburst-label,.d2b-sunburst-tooltip .d2b-sunburst-label{text-align:center}.d2b-sunburst-breadcrumb .d2b-sunburst-value,.d2b-sunburst-tooltip .d2b-sunburst-value{font-size:14pt;margin-top:5px}.d2b-sunburst-breadcrumb .d2b-sunburst-percent{float:right}.d2b-breadcrumbs:not(.d2b-vertical) .d2b-sunburst-percent{margin-left:30px}.d2b-sunburst-tooltip{text-align:center}.d2b-sunburst-tooltip .d2b-sunburst-percent{display:inline}.d2b-sunburst-tooltip .d2b-sunburst-percent:before{content:"("}.d2b-sunburst-tooltip .d2b-sunburst-percent:after{content:")"}.d2b-line-graph .d2b-line{stroke-width:1.5px;fill:none}.d2b-area-graph .d2b-area{stroke:none;fill-opacity:0.3}.d2b-bar-graph .d2b-bar-group rect{opacity:0.8}.d2b-bubble-pack-graph .d2b-bubble-point{opacity:0.75}.d2b-bubble-pack-graph .d2b-bubble-indicator rect{fill-opacity:0.25;stroke-opacity:0.9;cursor:pointer;stroke-width:1px}.d2b-bubble-pack-graph .d2b-bubble-indicator rect:hover{stroke-width:2px}.d2b-bubble-pack-graph .d2b-bubble-indicator path,.d2b-bubble-pack-graph .d2b-bubble-indicator text{pointer-events:none}.d2b-plane text{font-size:10pt}.d2b-plane .d2b-y2-axis .d2b-axis-label,.d2b-plane .d2b-y-axis .d2b-axis-label{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.d2b-plane .d2b-y2-axis .tick line,.d2b-plane .d2b-y-axis .tick line{stroke-width:0.6px}.d2b-plane .d2b-grid .tick line{shape-rendering:crispEdges;stroke-width:0.5px;stroke-opacity:0.15}.d2b-plane .d2b-grid .tick text{display:none}.d2b-plane .d2b-axis-label{fill:#000;font-weight:700}.d2b-plane path.domain{stroke-width:0.4px;stroke-opacity:0.4}.d2b-sunburst-arc{-webkit-transition:opacity 0.2s,stroke-width 0.2s;transition:opacity 0.2s,stroke-width 0.2s;cursor:pointer;opacity:0.9;stroke-width:0.8px;stroke:#fff}.d2b-sunburst-arc.d2b-transparent{fill-opacity:0.2}.d2b-sunburst-label{font-size:8pt;fill-opacity:0.8;pointer-events:none;font-family:arial}.d2b-sunburst-label.d2b-transparent{fill-opacity:0.2}.d2b-sunburst-center{fill-opacity:0;stroke:none;cursor:pointer}.d2b-sunburst-ancestor{opacity:0.4}.d2b-tooltip-area{pointer-events:none}.d2b-tooltip-area .d2b-tooltip{background:#fff;border:1px solid #bbb;border-radius:2px;position:fixed;box-shadow:0px 0px 2px #ccc}.d2b-tooltip-area .d2b-tooltip-content{padding:6px 10px}.d2b-tooltip-area .d2b-tooltip{margin:0}.d2b-tooltip-area .d2b-tooltip:before{left:0;top:0;position:absolute;z-index:2;content:""}.d2b-tooltip-area .d2b-tooltip-top{-webkit-transform:translate(-50%,-100%);transform:translate(-50%,-100%);margin-left:0;margin-top:-15px}.d2b-tooltip-area .d2b-tooltip-top:before{-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%;top:100%;width:0;height:0;border-style:solid;border-color:transparent;border-width:6px 6px 0;border-top-color:inherit}.d2b-tooltip-area .d2b-tooltip-bottom{-webkit-transform:translate(-50%,0);transform:translate(-50%,0);margin-left:0;margin-top:15px}.d2b-tooltip-area .d2b-tooltip-bottom:before{-webkit-transform:translateX(-50%);transform:translateX(-50%);left:50%;top:-6px;width:0;height:0;border-style:solid;border-color:transparent;border-width:0 6px 6px;border-bottom-color:inherit}.d2b-tooltip-area .d2b-tooltip-right{-webkit-transform:translate(0,-50%);transform:translate(0,-50%);margin-left:15px;margin-top:0}.d2b-tooltip-area .d2b-tooltip-right:before{-webkit-transform:translateY(-50%);transform:translateY(-50%);left:-6px;top:50%;width:0;height:0;border-style:solid;border-color:transparent;border-width:6px 6px 6px 0;border-right-color:inherit}.d2b-tooltip-area .d2b-tooltip-left{-webkit-transform:translate(-100%,-50%);transform:translate(-100%,-50%);margin-left:-15px;margin-top:0}.d2b-tooltip-area .d2b-tooltip-left:before{-webkit-transform:translateY(-50%);transform:translateY(-50%);left:100%;top:50%;width:0;height:0;border-style:solid;border-color:transparent;border-width:6px 0 6px 6px;border-left-color:inherit}.d2b-tooltip-axis-area{pointer-events:none;font-family:Arial}.d2b-tooltip-axis-area .d2b-tooltip-marker{stroke-width:2px;stroke:#bbb;stroke-dasharray:5,5}.d2b-tooltip-axis-area .d2b-tooltip{opacity:0.9;white-space:nowrap;border:1px solid #ddd;background:hsla(0,0%,100%,.8);position:absolute;box-shadow:0px 0px 2px #ccc}.d2b-tooltip-axis-area .d2b-tooltip .d2b-tooltip-title{text-align:center;background:rgba(150,165,175,.8);padding:5px 10px;font-weight:700;color:#fff}.d2b-tooltip-axis-area .d2b-tooltip .d2b-tooltip-content{padding:5px 10px}.d2b-tooltip-axis-area .d2b-tooltip .d2b-tooltip-content .d2b-tooltip-row{padding-left:5px;border-left-width:3px;border-left-style:solid;margin-bottom:5px}.d2b-tooltip-axis-area .d2b-tooltip .d2b-tooltip-content .d2b-tooltip-row:last-child{margin-bottom:0px}.d2b-breadcrumbs{color:#555;font-size:9pt;box-sizing:content-box}.d2b-breadcrumbs .d2b-breadcrumb{border:0px solid transparent;border-left-width:8px;border-bottom-width:1px;padding:6px 13px;margin-bottom:10px;text-transform:uppercase;position:relative}.d2b-breadcrumbs .d2b-breadcrumb:first-child .d2b-breadcrumb-icon:after,.d2b-breadcrumbs .d2b-breadcrumb:last-child .d2b-breadcrumb-icon:after{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);left:-15.5px;width:13px;height:13px;text-align:center;font-family:FontAwesome;color:#fff;background-color:inherit;padding:5px;border-radius:15px}.d2b-breadcrumbs .d2b-breadcrumb:first-child .d2b-breadcrumb-icon:after{content:"\\f015"}.d2b-breadcrumbs .d2b-breadcrumb:not(:first-child):last-child .d2b-breadcrumb-icon:after{content:"\\f25a"}.d2b-breadcrumbs:not(.d2b-vertical){white-space:nowrap}.d2b-breadcrumbs:not(.d2b-vertical) .d2b-breadcrumb{border-right-width:1px;border-top-width:1px;white-space:nowrap;display:inline-block}.d2b-breadcrumbs:not(.d2b-vertical) .d2b-breadcrumb:not(:last-child){margin-right:20px}.d2b-breadcrumbs:not(.d2b-vertical) .d2b-breadcrumb:not(:last-child):after{width:0;height:0;border-style:solid;border-color:transparent;border-width:6px 0 6px 6px;border-left-color:inherit;position:absolute;z-index:2;content:"";top:50%;left:100%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.d2b-breadcrumbs.d2b-vertical .d2b-breadcrumb{/*&:after {\n      triangle: pointing-right;\n      width: 100px;\n      height: 100px;\n      background-color: inherit;\n      position: absolute;\n      z-index: 2;\n      content: \'\';\n\n      top: 100%;\n      left: 50%;\n\n      transform: translateX(-50%);\n\n    }*/}.d2b-breadcrumbs.d2b-vertical .d2b-breadcrumb:not(:last-child):after{width:0;height:0;border-style:solid;border-color:transparent;border-width:6px 6px 0;border-top-color:inherit;position:absolute;z-index:2;content:"";top:100%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.stuff{display:none}.d2b-legend{color:#555;font-size:9pt}.d2b-legend .d2b-legend-item{border:0px solid transparent;padding:2px;padding-left:18px;position:relative;cursor:pointer}.d2b-legend .d2b-legend-item .d2b-legend-icon{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);left:7px;width:12px;height:12px}.d2b-legend .d2b-legend-item .d2b-legend-svg-icon{margin-left:-5px;margin-top:-5px;pointer-events:none}.d2b-legend .d2b-legend-item .d2b-legend-svg-icon path,.d2b-legend .d2b-legend-item .d2b-legend-svg-icon text{font-family:FontAwesome;text-anchor:middle;alignment-baseline:central;stroke-width:1px;fill-opacity:0.8}.d2b-legend:not(.d2b-vertical) .d2b-legend-item{display:inline-block}.d2b-legend:not(.d2b-vertical) .d2b-legend-item:not(:last-child){margin-right:10px}.d2b-legend:not(.d2b-vertical) .d2b-legend-icon{margin-top:1.5px}.d2b-chart-frame{height:100%;width:100%;position:relative}.d2b-chart-frame .d2b-breadcrumbs-frame,.d2b-chart-frame .d2b-chart,.d2b-chart-frame .d2b-legend-frame{position:absolute;overflow:auto}.d2b-chart-frame .d2b-breadcrumbs-frame .d2b-breadcrumbs,.d2b-chart-frame .d2b-legend-frame .d2b-breadcrumbs{padding-left:10px;padding-right:2px}.d2b-chart-frame .d2b-breadcrumbs-frame:not(.d2b-vertical),.d2b-chart-frame .d2b-legend-frame:not(.d2b-vertical){overflow-y:hidden}.d2b-chart-frame .d2b-breadcrumbs-frame:not(.d2b-vertical) .d2b-breadcrumbs,.d2b-chart-frame .d2b-breadcrumbs-frame:not(.d2b-vertical) .d2b-legend,.d2b-chart-frame .d2b-breadcrumbs-frame:not(.d2b-vertical) .d2b-legend-item,.d2b-chart-frame .d2b-legend-frame:not(.d2b-vertical) .d2b-breadcrumbs,.d2b-chart-frame .d2b-legend-frame:not(.d2b-vertical) .d2b-legend,.d2b-chart-frame .d2b-legend-frame:not(.d2b-vertical) .d2b-legend-item{white-space:nowrap;overflow-y:hidden}.d2b-chart-frame .d2b-breadcrumbs-frame:not(.d2b-vertical).d2b-legend-frame,.d2b-chart-frame .d2b-legend-frame:not(.d2b-vertical).d2b-legend-frame{height:20px;text-align:center}.d2b-chart-frame .d2b-breadcrumbs-frame:not(.d2b-vertical).d2b-breadcrumbs-frame,.d2b-chart-frame .d2b-legend-frame:not(.d2b-vertical).d2b-breadcrumbs-frame{height:55px}.d2b-chart-frame .d2b-breadcrumbs-frame.d2b-vertical .d2b-breadcrumbs-container,.d2b-chart-frame .d2b-breadcrumbs-frame.d2b-vertical .d2b-legend-container,.d2b-chart-frame .d2b-legend-frame.d2b-vertical .d2b-breadcrumbs-container,.d2b-chart-frame .d2b-legend-frame.d2b-vertical .d2b-legend-container{display:table;height:100%;width:100%}.d2b-chart-frame .d2b-breadcrumbs-frame.d2b-vertical .d2b-breadcrumbs-container .d2b-legend,.d2b-chart-frame .d2b-breadcrumbs-frame.d2b-vertical .d2b-legend-container .d2b-legend,.d2b-chart-frame .d2b-legend-frame.d2b-vertical .d2b-breadcrumbs-container .d2b-legend,.d2b-chart-frame .d2b-legend-frame.d2b-vertical .d2b-legend-container .d2b-legend{display:table-cell;vertical-align:middle}.d2b-chart-frame .d2b-breadcrumbs-frame.d2b-vertical .d2b-breadcrumbs-container .d2b-breadcrumbs,.d2b-chart-frame .d2b-breadcrumbs-frame.d2b-vertical .d2b-legend-container .d2b-breadcrumbs,.d2b-chart-frame .d2b-legend-frame.d2b-vertical .d2b-breadcrumbs-container .d2b-breadcrumbs,.d2b-chart-frame .d2b-legend-frame.d2b-vertical .d2b-legend-container .d2b-breadcrumbs{display:table-cell;vertical-align:top}.d2b-chart-frame .d2b-breadcrumbs-frame.d2b-vertical.d2b-breadcrumbs-frame,.d2b-chart-frame .d2b-legend-frame.d2b-vertical.d2b-breadcrumbs-frame{width:180px}.d2b-chart-frame .d2b-breadcrumbs-frame.d2b-vertical.d2b-legend-frame,.d2b-chart-frame .d2b-legend-frame.d2b-vertical.d2b-legend-frame{width:110px}',void 0);var N="0.0.23",I=function(){return Math.random().toString(36).substr(2,9)},U=e.scaleOrdinal(e.schemeCategory10),W=function(t){return null===t?NaN:+t};m.tendancy="mean",x.tendancy="median",P.tendancy="mode",w.tendancy="range",k.tendancy="midpoint";var D=Math.PI,j=Math.sqrt(8),V=Math.sqrt(2),q={draw:function(t,e){var n=Math.sqrt(e/(D+5/4)),r=.3125*n,a=2*Math.asin(.25),o=(D/2-a)/2,i=n/j-n*Math.cos(o),l=n*Math.sin(o);t.arc(i,l,n,-o,2*D-a-o),t.lineTo(n*(5/4-1/V),-n*(1/j+5/4-1/V)),t.lineTo(n*(5/4-1/V)-r,-n*(1/j+5/4-1/V)),t.lineTo(n*(5/4-1/V)-r,-n*(1/j+7/4-1/V)),t.lineTo(n*(7/4-1/V+1/j),-n*(1/j+7/4-1/V)),t.lineTo(n*(7/4-1/V+1/j),-n*(5/4-1/V)+r),t.lineTo(n*(5/4-1/V+1/j),-n*(5/4-1/V)+r),t.lineTo(n*(5/4-1/V+1/j),-n*(5/4-1/V)),t.closePath()}},$={draw:function(t,e){var n=Math.sqrt(e/(D+5/4)),r=2*Math.asin(.25),a=n/4-n*Math.cos(r/2);t.arc(0,a,n,3*-D/2+r/2,D/2-r/2),t.lineTo(n/4,3*n/4),t.lineTo(3*n/4,3*n/4),t.lineTo(3*n/4,5*n/4),t.lineTo(n/4,5*n/4),t.lineTo(n/4,7*n/4),t.lineTo(-n/4,7*n/4),t.lineTo(-n/4,5*n/4),t.lineTo(3*-n/4,5*n/4),t.lineTo(3*-n/4,3*n/4),t.lineTo(-n/4,3*n/4),t.closePath()}},H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J=(function(){function t(t){this.value=t}function e(e){function n(t,e){return new Promise(function(n,a){var l={key:t,arg:e,resolve:n,reject:a,next:null};i?i=i.next=l:(o=i=l,r(t,e))})}function r(n,o){try{var i=e[n](o),l=i.value;l instanceof t?Promise.resolve(l.value).then(function(t){r("next",t)},function(t){r("throw",t)}):a(i.done?"return":"normal",i.value)}catch(t){a("throw",t)}}function a(t,e){switch(t){case"return":o.resolve({value:e,done:!0});break;case"throw":o.reject(e);break;default:o.resolve({value:e,done:!1})}o=o.next,o?r(o.key,o.arg):i=null}var o,i;this._invoke=n,"function"!=typeof e.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)},{wrap:function(t){return function(){return new e(t.apply(this,arguments))}},await:function(e){return new t(e)}}}(),{props:{data:{default:function(){}},config:{default:function(){return function(){}}}},computed:{properties:function(){return{generator:this.generator,data:this.data,config:this.config}}},mounted:function(){this.updateDefer(),window.addEventListener("resize",this.updateDefer),this.watcher()},methods:{watcher:function(){var t=function(){e(),this.update(),this.watcher()},e=this.$watch("properties",t,{deep:!0})},update:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.data;this.config(this.generator);var r=e.select(this.$el),a=t.skipTransition?r:r.transition().duration(500);r.datum(n),a.call(this.generator)},updateNow:function(){var t=this;setTimeout(function(){t.update({skipTransition:!0})},0)},updateDefer:function(){setTimeout(this.updateNow,0)}}}),K={mixins:[J],template:'<div class = "d2b-vue-container d2b-vue-axis-chart"></div>',props:{generator:{default:function(){return X()}}}},Q={mixins:[J],template:'<div class = "d2b-vue-container d2b-vue-pie-chart"></div>',props:{generator:{default:function(){return L()}}}},Z={mixins:[J],template:'<div class = "d2b-vue-container d2b-vue-sunburst-chart"></div>',props:{generator:{default:function(){return Y()}}}};t.version=N,t.textWrap=o,t.textWrapPX=i,t.tweenArc=l,t.tweenNumber=d,t.tweenCentroid=u,t.tooltip=p,t.tooltipAxis=h,t.stack=b,t.breadcrumbs=f,t.legend=g,t.chartFrame=y,t.defaultColor=U,t.id=I,t.color=U,t.omit=v,t.mean=m,t.median=x,t.mode=P,t.range=w,t.midpoint=k,t.toDegrees=F,t.toRadians=_,t.modelBase=s,t.symbolMars=q,t.symbolVenus=$,t.point=A,t.svgLegend=M,t.svgPie=z,t.svgLine=B,t.svgArea=R,t.svgScatter=G,t.svgBar=T,t.svgBubblePack=C,t.svgSunburst=S,t.plane=O,t.chartPie=L,t.chartAxis=X,t.chartSunburst=Y,t.vueGenMixin=J,t.vueChartAxis=K,t.vueChartPie=Q,t.vueChartSunburst=Z}(this.d2b=this.d2b||{},d3);